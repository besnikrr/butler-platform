(self.webpackChunk=self.webpackChunk||[]).push([[472],{npNC:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>as});var i=t("ERkP"),a=t("daAW"),n=t("BhJM"),l=t("MNxq");const r="proceed anyway";var c=t("jg1C");const d=(e,s)=>{switch(s){case"subcategories":return`menu/subcategory/manage/${e}`;case"items":return`menu/item/manage/${e}`;case"menus":return`/menu/manage/${e}`;default:return""}},o=({relations:e,keys:s,isLoading:t,title:a,onDelete:l,onClose:o,deleteConfirmation:u,contentText:m})=>{const{t:h}=(0,n.$G)(),[x,j]=(0,i.useState)(!0),[p,g]=(0,i.useState)();(0,i.useEffect)((()=>{j(p!==r),u(p)}),[p]);const b=e&&s.reduce(((s,t)=>s||e[t].length>0),!1);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.ZT,{h2:!0,children:null!=m&&m.title?m.title:`${h("delete")} ${a}`}),(0,c.jsx)(n.iz,{}),(0,c.jsxs)(n.ZT,{className:"ui-flex mb-10",children:[null!=m&&m.subtitle?m.subtitle:`${h("delete_confirm")} ${null==a?void 0:a.toLowerCase()}`,"?"]}),t&&(0,c.jsx)(n.Od,{parts:["labelField-4"],className:"mt-20"}),b&&(0,c.jsxs)(n.ZT,{children:[null!=m&&m.info?m.info:h("delete_entity_used_on",{entity:null==a?void 0:a.toLowerCase()}),": "]}),!t&&b&&s.map((s=>{const t=null==e?void 0:e[s];return t.length?(0,c.jsxs)("div",{className:"mt-30",children:[(0,c.jsxs)(n.ZT,{size:"large",className:"menu-text-capitalize",p:!0,children:[s,":"]}),(0,c.jsx)("ul",{className:"mt-10",children:t.map((e=>(0,c.jsx)("li",{className:"my-5",children:(0,c.jsxs)(n.rU,{size:"medium",href:d(e.id,s),target:"_blank",className:"ui-flex v-center between ui-border p-5 ui-rounded",children:[e.name,(0,c.jsx)(n.JO,{type:"Link",size:14,className:"ml-5"})]})},e.id)))})]},s):null})),(0,c.jsxs)("div",{className:"ui-flex mt-30 column end",children:[(0,c.jsx)(n.ZT,{className:"mb-5",children:h("type_validation_to_continue",{validation:r})}),(0,c.jsx)(n.II,{placeholder:r,onChange:e=>g(e.target.value)})]}),(0,c.jsx)(n.iz,{vertical:30}),(0,c.jsxs)("div",{className:"ui-flex v-center end",children:[(0,c.jsx)(n.zx,{size:"large",variant:"ghost",onClick:o,children:h("cancel")}),(0,c.jsx)(n.zx,{disabled:x,size:"large",variant:"danger",className:"ml-10",onClick:()=>{j(!0),l(p)},children:h("continue")})]})]})},u=e=>{const{t:s}=(0,n.$G)(),t=(0,n.h_)(l.pH.MENU),[a,r]=(0,i.useState)(),[d,u]=(0,i.useState)(!0),[m,h]=(0,i.useState)();return(0,i.useEffect)((()=>{(async()=>{try{const s=await t.get(`/categories/relations/${e.meta.id}`);r(s.data)}catch(s){u(!1)}finally{u(!1)}})()}),[]),(0,c.jsx)(n.u_,{visible:!0,onClose:e.onClose,style:{minWidth:500},children:(0,c.jsx)(o,{title:s("category"),isLoading:d,relations:a,deleteConfirmation:e=>h(e),keys:["menus","subcategories","items"],onClose:e.onClose,onDelete:async()=>{try{return await t.delete(`/categories/${e.meta.id}`,{data:{confirmation:m}}),e.reloadData(e.meta.id),e.onClose()}catch(s){console.log(s)}finally{u(!1)}}})})};const m=function(e,s){const[t,a]=(0,i.useState)(e);return(0,i.useEffect)((()=>{const t=setTimeout((()=>a(e)),s||500);return()=>{clearTimeout(t)}}),[e,s]),t},h=()=>(0,c.jsx)("div",{className:"ui-flex center py-40",children:(0,c.jsxs)("div",{className:"ui-flex column v-center center ",children:[(0,c.jsx)(n.JO,{type:"Search",size:30,className:"mb-10"}),(0,c.jsx)(n.ZT,{size:"large",children:"No Results!"}),(0,c.jsx)(n.ZT,{size:"small",muted:!0,className:"mt-20",children:"No results found. Please check again"})]})}),x=({entity:e=""})=>(0,c.jsx)("div",{className:"menu-no-permissions ui-flex center py-40","data-testid":"menu-no-permission",children:(0,c.jsxs)("div",{className:"ui-flex column v-center center ",children:[(0,c.jsx)(n.JO,{type:"WarningTriangle",size:30,className:"mb-10"}),(0,c.jsx)(n.ZT,{h2:!0,children:"No Permissions!"}),(0,c.jsxs)(n.ZT,{size:"small",muted:!0,className:"mt-10",children:["You have no permissions to view ",e,". Please contact you administrator!"]})]})}),j=()=>{var e,s;const{can:t}=(0,i.useContext)(n.Il),{t:r}=(0,n.$G)(),d=(0,n.h_)(l.pH.MENU),o=(0,a.k6)(),[j,p]=(0,i.useState)(),[g,b]=(0,i.useState)(),[v,y]=(0,i.useState)(""),[_,N]=(0,i.useState)(!0),f=m(v),C=t(l.g3.MENU.CAN_GET_CATEGORIES),Z=t(l.g3.MENU.CAN_CREATE_CATEGORY),E=t(l.g3.MENU.CAN_DELETE_CATEGORY);(0,i.useEffect)((()=>{C&&(async()=>{const e=await d.get("/categories");p(e.data),N(!1)})()}),[]);return(0,n.N7)((()=>{(async()=>{const e=await d.get(f?`/categories?name=${f}`:"/categories");p(e.data)})()}),[f]),C?_?(0,c.jsx)(n.rj,{gutter:0,children:(0,c.jsx)(n.Zb,{page:!0,children:(0,c.jsx)(n.Od,{parts:["cardHeaderAction","divider","filterTable"]})})}):(0,c.jsx)(n.rj,{gutter:0,children:(0,c.jsxs)(n.X2,{children:[(0,c.jsx)(n.sg,{children:(0,c.jsxs)(n.Zb,{className:"menu-content",page:!0,header:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.ZT,{h2:!0,children:r("category_list")}),Z&&(0,c.jsx)(n.zx,{onClick:()=>o.push("/menu/category/editor"),children:r("create_new")})]}),children:[(0,c.jsx)("div",{className:"menu-toolbar",children:(0,c.jsx)("div",{className:"menu-toolbar-actions ui-flex start v-center",children:(0,c.jsx)(n.Vr,{value:v,placeholder:r("search"),onChange:e=>y(e.target.value)})})}),(0,c.jsxs)(n.iA,{children:[(0,c.jsx)(n.ss,{children:(0,c.jsxs)(n.SC,{children:[(0,c.jsx)(n.pj,{as:"th",children:r("name")}),(0,c.jsx)(n.pj,{as:"th",children:r("start_period")}),(0,c.jsx)(n.pj,{as:"th",children:r("end_period")}),(0,c.jsx)(n.pj,{as:"th",style:{width:50}})]})}),(0,c.jsx)(n.RM,{children:null==j||null==(e=j.result)?void 0:e.map((e=>(0,c.jsxs)(n.SC,{children:[(0,c.jsx)(n.pj,{children:(0,c.jsx)(n.rU,{size:"medium",component:a.rU,to:`/menu/category/view/${e.id}`,children:e.name})}),(0,c.jsx)(n.pj,{children:e.available_period.start_time}),(0,c.jsx)(n.pj,{children:e.available_period.end_time}),(0,c.jsx)(n.pj,{children:E&&(0,c.jsx)(n.Lt,{renderTrigger:(e,s)=>(0,c.jsx)(n.Kk,{onClick:e,ref:s,children:(0,c.jsx)(n.JO,{type:"MoreHorizontal01",size:18})}),hasArrow:!0,placement:"right",children:(0,c.jsx)("div",{style:{display:"flex",flexDirection:"column",width:160},children:(0,c.jsx)(n.zx,{className:"w-100",variant:"danger-ghost",muted:!0,onClick:()=>{e.id&&b({resource:"category",id:e.id})},children:r("delete")})})})})]},e.id)))})]}),(!(null!=j&&j.result)||(null==j||null==(s=j.result)?void 0:s.length)<1)&&!_&&(0,c.jsx)("div",{children:(0,c.jsx)(h,{})})]})}),g&&(0,c.jsx)(u,{reloadData:e=>(e=>{if(e){const s=null==j?void 0:j.result;p({result:null==s?void 0:s.filter((s=>s.id!==e))})}})(e),meta:g,onClose:()=>b(void 0)})]})}):(0,c.jsx)(x,{entity:"Categories"})};var p=t("geiN"),g=t("61cJ");const b=e=>{const s=e.split(":");return 60*Number(s[0])+Number(s[1])},v=()=>{var e,s,t,r,d;const{can:o}=(0,i.useContext)(n.Il),{t:u}=(0,n.$G)(),m=(0,n.h_)(l.pH.MENU),h=(0,a.k6)(),[x,j]=(0,i.useState)(""),[v,y]=(0,i.useState)(!1),[_,N]=(0,i.useState)(!1),[f,C]=(0,i.useState)(!1),{register:Z,handleSubmit:E,watch:w,formState:{errors:S}}=(0,p.cI)({resolver:(0,g.X)(l.qh)}),I=o(l.g3.MENU.CAN_CREATE_CATEGORY);return(0,i.useEffect)((()=>{const e=w(((e,{name:s})=>{s&&C(!0)}));return()=>e.unsubscribe()}),[w]),I?(0,c.jsx)(n.rj,{gutter:0,children:(0,c.jsxs)(n.X2,{children:[(0,c.jsx)(n.sg,{children:(0,c.jsx)(n.Zb,{className:"menu-content",page:!0,header:(0,c.jsx)(n.ZT,{h2:!0,children:u("create_new_category")}),children:(0,c.jsx)(n.X2,{children:(0,c.jsx)(n.sg,{offset:3,size:6,children:(0,c.jsxs)("form",{onSubmit:E((async e=>{j("");if(b(e.available_period.start_time)>=b(e.available_period.end_time))j(u("start_time_greater_than_end_time_error"));else try{y(!0),await m.post("/categories",e),h.push("/menu/category/list")}catch(x){j(x.message)}finally{y(!1)}})),children:[(0,c.jsx)(n.NI,{label:u("category_name"),className:"mt-20",children:(0,c.jsx)(n.II,Object.assign({"data-testid":"input-category-name",placeholder:u("enter_category_name")},Z("name"),{error:null==(e=S.name)?void 0:e.message}))}),(0,c.jsxs)(n.cw,{className:"mt-10",children:[(0,c.jsx)(n.NI,{label:u("start_period"),children:(0,c.jsx)(n.lJ,Object.assign({"data-testid":"input-start-time"},Z("available_period.start_time"),{error:null==(s=S.available_period)||null==(t=s.start_time)?void 0:t.message}))}),(0,c.jsx)(n.NI,{label:u("end"),children:(0,c.jsx)(n.lJ,Object.assign({"data-testid":"input-end-time"},Z("available_period.end_time"),{error:null==(r=S.available_period)||null==(d=r.end_time)?void 0:d.message}))})]}),x&&(0,c.jsx)("div",{className:"mt-20",children:(0,c.jsx)(n.Bc,{error:x})}),(0,c.jsx)(n.iz,{vertical:30}),(0,c.jsxs)("div",{className:"form-bottom-action",children:[(0,c.jsx)(n.zx,{variant:"ghost",onClick:()=>{var e;e="/menu/category/list",f?N(!0):h.push(e)},children:u("cancel")}),(0,c.jsx)(n.zx,{"data-testid":"category-submit",type:"submit",variant:"primary",disabled:v,children:u("create_category")})]})]})})})})}),(0,c.jsx)(n.RZ,{modal:_,setModal:N,onLeave:()=>h.push("/menu/category/list")})]})}):((0,n.hi)("You have no permissions to create category",{type:"warning"}),(0,c.jsx)(a.l_,{to:"/menu/category/list"}))};var y=t("KDUK");const _=()=>{var e,s,t,r;const{can:d}=(0,i.useContext)(n.Il),{t:o}=(0,n.$G)(),u=(0,n.h_)(l.pH.MENU),m=(0,y.k6)(),h=(0,y.UO)(),[x,j]=(0,i.useState)(),[p,g]=(0,i.useState)(!0),b=d(l.g3.MENU.CAN_GET_CATEGORY),v=d(l.g3.MENU.CAN_PATCH_CATEGORY);return(0,i.useEffect)((()=>{if(!b)return void(0,n.hi)("You have no permissions to view category",{type:"warning"});(async()=>{const e=await u.get(`/categories/${h.id}`);j(e.data),g(!1)})()}),[h.id]),b?p?(0,c.jsx)(n.rj,{gutter:0,children:(0,c.jsx)(n.Zb,{page:!0,children:(0,c.jsx)(n.Od,{parts:["cardHeaderAction","divider","text","text","text"]})})}):(0,c.jsx)(n.rj,{gutter:0,children:(0,c.jsx)(n.X2,{children:(0,c.jsx)(n.sg,{children:(0,c.jsx)(n.Zb,{className:"menu-content",page:!0,header:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.ZT,{h2:!0,children:null==x||null==(e=x.result)?void 0:e.name}),v&&(0,c.jsx)(n.rU,{component:n.Xd,onClick:()=>{var e;return m.push(`/menu/category/manage/${null==x||null==(e=x.result)?void 0:e.id}`)},children:o("edit")})]}),children:(0,c.jsxs)(n.X2,{cols:1,children:[(0,c.jsxs)(n.sg,{className:"mt-10",children:[(0,c.jsx)(n.ZT,{className:"mb-5",size:"small",p:!0,muted:!0,children:o("category_name")}),(0,c.jsx)(n.ZT,{children:null==x||null==(s=x.result)?void 0:s.name})]}),(0,c.jsxs)(n.sg,{children:[(0,c.jsx)(n.ZT,{className:"mb-5",size:"small",p:!0,muted:!0,children:o("start_period")}),(0,c.jsx)(n.ZT,{children:null==x||null==(t=x.result)?void 0:t.available_period.start_time})]}),(0,c.jsxs)(n.sg,{children:[(0,c.jsx)(n.ZT,{className:"mb-5",size:"small",p:!0,muted:!0,children:o("end_period")}),(0,c.jsx)(n.ZT,{children:null==x||null==(r=x.result)?void 0:r.available_period.end_time})]})]})})})})}):(0,c.jsx)(a.l_,{to:"/menu/category/list"})},N=()=>{var e,s,t,r,d,o;const{can:u}=(0,i.useContext)(n.Il),{t:m}=(0,n.$G)(),h=(0,n.h_)(l.pH.MENU),x=(0,y.k6)(),j=(0,y.UO)(),[v,_]=(0,i.useState)(""),[N,f]=(0,i.useState)(!1),[C,Z]=(0,i.useState)(),[E,w]=(0,i.useState)(!1),[S,I]=(0,i.useState)(!1),[U,Q]=(0,i.useState)(!0),{register:F,handleSubmit:T,watch:W,formState:{errors:L},control:O,reset:M}=(0,p.cI)({resolver:(0,g.X)(l.Wv)}),G=u(l.g3.MENU.CAN_PATCH_CATEGORY);(0,i.useEffect)((()=>{(async()=>{const e=await h.get(`/categories/${j.id}`);Z(e.data),e.data.result&&M(e.data.result),Q(!1)})()}),[j.id]);(0,i.useEffect)((()=>{const e=W(((e,{name:s})=>{s&&I(!0)}));return()=>e.unsubscribe()}),[W]);return G?U?(0,c.jsx)(n.rj,{gutter:0,children:(0,c.jsx)(n.Zb,{page:!0,children:(0,c.jsx)(n.Od,{parts:["cardHeaderAction","divider","labelField","labelField"]})})}):(0,c.jsx)(n.rj,{gutter:0,children:(0,c.jsx)(n.X2,{children:(0,c.jsx)(n.sg,{children:(0,c.jsx)(n.Zb,{className:"menu-content",page:!0,header:(0,c.jsx)("div",{children:(0,c.jsx)(n.ZT,{h2:!0,children:null==C||null==(e=C.result)?void 0:e.name})}),children:(0,c.jsxs)(n.X2,{children:[(0,c.jsx)(n.sg,{offset:3,size:6,children:(0,c.jsxs)("form",{onSubmit:T((async e=>{if(_(""),e.available_period){if(b(e.available_period.start_time)>=b(e.available_period.end_time))return void _("Start time must not be greater than End time")}try{f(!0),await h.patch(`/categories/${j.id}`,e),x.push("/menu/category/list")}catch(v){_(v.message)}finally{f(!1)}})),children:[(0,c.jsx)(n.NI,{label:m("category_name"),children:(0,c.jsx)(n.II,Object.assign({placeholder:m("enter_category_name")},F("name"),{error:null==(s=L.name)?void 0:s.message}))}),(0,c.jsxs)(n.cw,{className:"mt-10",children:[(0,c.jsx)(n.NI,{label:m("start_period"),children:(0,c.jsx)(n.lJ,Object.assign({},F("available_period.start_time"),{error:null==(t=L.available_period)||null==(r=t.start_time)?void 0:r.message}))}),(0,c.jsx)(n.NI,{label:m("end"),children:(0,c.jsx)(n.lJ,Object.assign({},F("available_period.end_time"),{error:null==(d=L.available_period)||null==(o=d.end_time)?void 0:o.message}))})]}),v&&(0,c.jsx)("div",{className:"mt-20",children:(0,c.jsx)(n.Bc,{error:v})}),(0,c.jsx)(n.iz,{vertical:30}),(0,c.jsxs)("div",{className:"form-bottom-action",children:[(0,c.jsx)(n.zx,{variant:"ghost",onClick:()=>{var e;e="/menu/category/list",S?w(!0):x.push(e)},children:m("cancel")}),(0,c.jsx)(n.zx,{type:"submit",variant:"primary",disabled:N,children:m("save")})]})]})}),(0,c.jsx)(n.RZ,{modal:E,setModal:w,onLeave:()=>x.push("/menu/category/list")})]})})})})}):((0,n.hi)("You have no permissions to update category",{type:"warning"}),(0,c.jsx)(a.l_,{to:"/menu/category/list"}))},f=e=>{const{t:s}=(0,n.$G)(),t=(0,n.h_)(l.pH.MENU),[a,r]=(0,i.useState)(),[d,u]=(0,i.useState)(!0),[m,h]=(0,i.useState)();return(0,i.useEffect)((()=>{(async()=>{try{const s=await t.get(`/subcategories/relations/${e.meta.id}`);r(s.data)}catch(s){u(!1)}finally{u(!1)}})()}),[]),(0,c.jsx)(n.u_,{visible:!0,onClose:e.onClose,style:{minWidth:500},children:(0,c.jsx)(o,{title:s("subcategory"),isLoading:d,relations:a,deleteConfirmation:e=>h(e),keys:["menus","items"],onClose:e.onClose,onDelete:async()=>{try{return await t.delete(`/subcategories/${e.meta.id}`,{data:{confirmation:m}}),e.reloadData(e.meta.id),e.onClose()}catch(s){console.log(s)}finally{u(!1)}}})})};var C=t("pu3o"),Z=t.n(C);const E=()=>{var e,s;const{t}=(0,n.$G)(),r=(0,n.h_)(l.pH.MENU),d=[{name:"categories",queryParamName:"categories_ids",data:async()=>{var e;const s=await r.get("/categories");return((null==s||null==(e=s.data)?void 0:e.result)||[]).map((e=>({label:e.name,queryParamValue:e.id||""})))}}],{can:o}=(0,i.useContext)(n.Il),u=(0,a.k6)(),[j,p]=(0,i.useState)(),[g,b]=(0,i.useState)(),[v,y]=(0,i.useState)(""),[_,N]=(0,i.useState)(""),[C,E]=(0,i.useState)(!0),w=m(_),S=o(l.g3.MENU.CAN_DELETE_SUBCATEGORY),I=o(l.g3.MENU.CAN_GET_SUBCATEGORIES),U=o(l.g3.MENU.CAN_CREATE_SUBCCATEGORY);(0,i.useEffect)((()=>{y(u.location.search)}),[]),(0,i.useEffect)((()=>{I&&(async()=>{const e=Z().parse(u.location.search.replace("?","").replace(/\|([^&]*)&?/g,"&"));let s=decodeURIComponent(Z().stringify(e)).replace(/\|([^&]*)&?/g,"&");const t=await r.get(w?`/subcategories?name=${w}&${s}`:`/subcategories${s?"/?":""}${s}`);p(t.data),E(!1)})()}),[v,w]);return I?C?(0,c.jsx)(n.rj,{gutter:0,children:(0,c.jsx)(n.Zb,{page:!0,children:(0,c.jsx)(n.Od,{parts:["cardHeaderAction","divider","filterTable-2"]})})}):(0,c.jsx)(n.rj,{gutter:0,children:(0,c.jsxs)(n.X2,{children:[(0,c.jsx)(n.sg,{children:(0,c.jsxs)(n.Zb,{className:"menu-content",page:!0,header:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.ZT,{h2:!0,children:t("subcategory_list")}),U&&(0,c.jsx)(n.zx,{onClick:()=>u.push("/menu/subcategory/editor"),children:t("create_new")})]}),children:[(0,c.jsx)("div",{className:"menu-toolbar",children:(0,c.jsxs)("div",{className:"menu-toolbar-actions ui-flex start v-center",children:[(0,c.jsx)(n.x$,{columns:d,onChange:e=>{y(e),u.push(`?${e}`)},filtersString:v}),(0,c.jsx)(n.Vr,{value:_,placeholder:t("search"),onChange:e=>N(e.target.value)})]})}),(0,c.jsxs)(n.iA,{children:[(0,c.jsx)(n.ss,{children:(0,c.jsxs)(n.SC,{children:[(0,c.jsx)(n.pj,{as:"th",children:t("name")}),(0,c.jsx)(n.pj,{as:"th",children:t("category")}),(0,c.jsx)(n.pj,{as:"th",style:{width:50}})]})}),(0,c.jsx)(n.RM,{children:null==j||null==(e=j.result)?void 0:e.map((e=>{var s;return(0,c.jsxs)(n.SC,{children:[(0,c.jsx)(n.pj,{children:(0,c.jsx)(n.rU,{size:"medium",component:a.rU,to:`/menu/subcategory/view/${e.id}`,children:e.name||""})}),(0,c.jsx)(n.pj,{children:(null==(s=e.category)?void 0:s.name)||""}),(0,c.jsx)(n.pj,{children:S&&(0,c.jsx)(n.Lt,{renderTrigger:(e,s)=>(0,c.jsx)(n.Kk,{onClick:e,ref:s,children:(0,c.jsx)(n.JO,{type:"MoreHorizontal01",size:18})}),hasArrow:!0,placement:"right",children:(0,c.jsx)("div",{style:{display:"flex",flexDirection:"column",width:160},children:(0,c.jsx)(n.zx,{className:"w-100",variant:"danger-ghost",muted:!0,onClick:()=>{e.id&&b({resource:"subcategory",id:e.id})},children:t("delete")})})})})]},e.id)}))})]}),(!(null!=j&&j.result)||(null==j||null==(s=j.result)?void 0:s.length)<1)&&!C&&(0,c.jsx)("div",{children:(0,c.jsx)(h,{})})]})}),g&&(0,c.jsx)(f,{reloadData:e=>(e=>{if(e){const s=null==j?void 0:j.result;p({result:null==s?void 0:s.filter((s=>s.id!==e))})}})(e),meta:g,onClose:()=>b(void 0)})]})}):(0,c.jsx)(x,{entity:"Subcategories"})},w=()=>{var e,s;const{can:t}=(0,i.useContext)(n.Il),{t:r}=(0,n.$G)(),d=(0,n.h_)(l.pH.MENU),o=(0,a.k6)(),[u,m]=(0,i.useState)(),[h,x]=(0,i.useState)(!1),[j,b]=(0,i.useState)(!1),[v,y]=(0,i.useState)(!1),[_,N]=(0,i.useState)(""),{register:f,handleSubmit:C,watch:Z,formState:{errors:E},control:w}=(0,p.cI)({resolver:(0,g.X)(l.uk)}),S=t(l.g3.MENU.CAN_CREATE_SUBCCATEGORY),I=t(l.g3.MENU.CAN_GET_CATEGORIES);(0,i.useEffect)((()=>{const e=Z(((e,{name:s})=>{s&&y(!0)}));return()=>e.unsubscribe()}),[Z]),(0,i.useEffect)((()=>{if(!I)return;(async()=>{const e=await d.get("/categories");m(e.data)})()}),[]);return S?(0,c.jsx)(n.rj,{gutter:0,children:(0,c.jsx)(n.X2,{children:(0,c.jsx)(n.sg,{children:(0,c.jsx)(n.Zb,{className:"menu-content",page:!0,header:(0,c.jsx)(n.ZT,{h2:!0,children:r("create_new_subcategory")}),children:(0,c.jsxs)(n.X2,{children:[(0,c.jsx)(n.sg,{offset:3,size:6,children:(0,c.jsxs)("form",{onSubmit:C((async e=>{N("");try{x(!0),await d.post("/subcategories",e),o.push("/menu/subcategory/list")}catch(_){N(_.message)}finally{x(!1)}})),children:[(0,c.jsx)(n.NI,{label:r("subcategory_name"),children:(0,c.jsx)(n.II,Object.assign({"data-testid":"input-subcategory-name",placeholder:r("enter_subcategory_name")},f("name"),{error:null==(e=E.name)?void 0:e.message}))}),(0,c.jsx)(n.NI,{label:r("category"),children:(0,c.jsxs)(n.Ph,{"data-testid":"select-category-name",value:"",selectProps:Object.assign({},f("categoryId")),error:null==(s=E.categoryId)?void 0:s.message,children:[(0,c.jsx)(n.Wx,{value:"",disabled:!0,hidden:!0,children:r("please_select_category")}),(e=>e.length?(e||[]).map((e=>(0,c.jsx)(n.Wx,{value:e.id,children:e.name},e.id))):null)((null==u?void 0:u.result)||[])]})}),_&&(0,c.jsx)("div",{className:"mt-20",children:(0,c.jsx)(n.Bc,{error:_})}),(0,c.jsx)(n.iz,{vertical:30}),(0,c.jsx)(n.X2,{children:(0,c.jsxs)("div",{className:"form-bottom-action",children:[(0,c.jsx)(n.zx,{variant:"ghost",onClick:()=>{var e;e="/menu/subcategory/list",v?b(!0):o.push(e)},children:r("cancel")}),(0,c.jsx)(n.zx,{"data-testid":"subcategory-submit",type:"submit",variant:"primary",disabled:h,children:r("create_subcategory")})]})})]})}),(0,c.jsx)(n.RZ,{modal:j,setModal:b,onLeave:()=>o.push("/menu/subcategory/list")})]})})})})}):((0,n.hi)("You have no permissions to create subcategory",{type:"warning"}),(0,c.jsx)(a.l_,{to:"/menu/subcategory/list"}))},S=()=>{var e,s,t,r;const{can:d}=(0,i.useContext)(n.Il),{t:o}=(0,n.$G)(),u=(0,n.h_)(l.pH.MENU),m=(0,y.k6)(),h=(0,y.UO)(),[x,j]=(0,i.useState)(!0),[p,g]=(0,i.useState)(),b=d(l.g3.MENU.CAN_GET_SUBCATEGORY),v=d(l.g3.MENU.CAN_PATCH_SUBCATEGORY);return(0,i.useEffect)((()=>{b&&(async()=>{const e=await u.get(`/subcategories/${h.id}`);e.data&&(g(e.data),j(!1))})()}),[h.id]),b?x?(0,c.jsx)(n.rj,{gutter:0,children:(0,c.jsx)(n.Zb,{page:!0,children:(0,c.jsx)(n.Od,{parts:["cardHeaderAction","divider","text","text","text"]})})}):(0,c.jsx)(n.rj,{gutter:0,children:(0,c.jsx)(n.Zb,{className:"menu-content",page:!0,header:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.ZT,{h2:!0,children:null==p||null==(e=p.result)?void 0:e.name}),v&&(0,c.jsx)(n.rU,{component:n.Xd,onClick:()=>{var e;return m.push(`/menu/subcategory/manage/${null==p||null==(e=p.result)?void 0:e.id}`)},children:o("edit")})]}),children:(0,c.jsxs)(n.X2,{cols:1,children:[(0,c.jsxs)(n.sg,{className:"mt-10",children:[(0,c.jsx)(n.ZT,{className:"mb-5",size:"small",p:!0,muted:!0,children:o("subcategory_name")}),(0,c.jsx)(n.ZT,{children:null==p||null==(s=p.result)?void 0:s.name})]}),(0,c.jsxs)(n.sg,{children:[(0,c.jsx)(n.ZT,{className:"mb-5",size:"small",p:!0,muted:!0,children:o("category")}),(0,c.jsx)(n.ZT,{children:(null==p||null==(t=p.result)||null==(r=t.category)?void 0:r.name)||"-"})]})]})})}):((0,n.hi)("You have no permissions to view subcategory",{type:"warning"}),(0,c.jsx)(a.l_,{to:"/menu/subcategory/list"}))},I={title:"Update Item Categories",subtitle:"Are you sure you want to change category of item",info:"Removing category for this item will cause changes on"},U=()=>{var e,s,t,r;const{can:d}=(0,i.useContext)(n.Il),{t:u}=(0,n.$G)(),m=(0,n.h_)(l.pH.MENU),h=(0,y.k6)(),x=(0,y.UO)(),[j,b]=(0,i.useState)(""),[v,_]=(0,i.useState)(!1),[N,f]=(0,i.useState)(),[C,Z]=(0,i.useState)(),[E,w]=(0,i.useState)(),[S,U]=(0,i.useState)(),[Q,F]=(0,i.useState)(!1),[T,W]=(0,i.useState)(!1),[L,O]=(0,i.useState)(),[M,G]=(0,i.useState)(!0),{register:X,handleSubmit:k,watch:z,formState:{errors:B},control:D,reset:A,getValues:R}=(0,p.cI)({resolver:(0,g.X)(l.Ri)}),V=(d(l.g3.MENU.CAN_GET_SUBCATEGORIES),d(l.g3.MENU.CAN_PATCH_SUBCATEGORY));(0,i.useEffect)((()=>{const e=z(((e,{name:s})=>{s&&W(!0)}));return()=>e.unsubscribe()}),[z]),(0,i.useEffect)((()=>{(async()=>{const e=await m.get(`/subcategories/${x.id}`);e.data&&(f(e.data),G(!1))})(),(async()=>{const e=await m.get("/categories");Z(e.data)})()}),[x.id]),(0,i.useEffect)((()=>{var e;null!=N&&N.result&&null!=C&&null!=(e=C.result)&&e.length&&A(N.result)}),[N,C]);const $=async e=>{b("");try{_(!0);const s=R(),t={name:s.name,category:s.category,nonce:e};await m.patch(`/subcategories/${x.id}`,t),h.push("/menu/subcategory/list")}catch(s){s.response.data&&b(s.response.data.message),s.response.data.result&&(U(s.response.data.result),O(!1))}finally{_(!1)}};return V?M?(0,c.jsx)(n.rj,{gutter:0,children:(0,c.jsx)(n.Zb,{page:!0,children:(0,c.jsx)(n.Od,{parts:["cardHeaderAction","divider","labelField","labelField","labelField"]})})}):(0,c.jsx)(n.rj,{gutter:0,children:(0,c.jsxs)(n.X2,{children:[(0,c.jsx)(n.sg,{children:(0,c.jsx)(n.Zb,{className:"menu-content",page:!0,header:(0,c.jsx)(n.ZT,{h2:!0,children:null==N||null==(e=N.result)?void 0:e.name}),children:(0,c.jsx)(n.X2,{children:(0,c.jsx)(n.sg,{offset:3,size:6,children:(0,c.jsxs)("form",{onSubmit:k((async()=>{await $()})),children:[(0,c.jsx)(n.NI,{label:u("subcategory_name"),children:(0,c.jsx)(n.II,Object.assign({"data-testid":"input-subcategory-edit-name",placeholder:u("enter_subcategory_name")},X("name"),{error:null==(s=B.name)?void 0:s.message}))}),(0,c.jsx)(n.NI,{label:u("category"),children:(0,c.jsxs)(n.Ph,{"data-testid":"select-category-edit-name",value:"",selectProps:Object.assign({},X("category.id")),error:null==(t=B.category)||null==(r=t.id)?void 0:r.message,children:[(0,c.jsx)(n.Wx,{value:"",disabled:!0,hidden:!0,children:u("please_select_category")}),(e=>(e||[]).map((e=>(0,c.jsx)(n.Wx,{value:e.id,children:e.name},e.id))))((null==C?void 0:C.result)||[])]})}),j&&(0,c.jsx)("div",{className:"mt-20",children:(0,c.jsx)(n.Bc,{error:j})}),(0,c.jsx)(n.iz,{vertical:30}),(0,c.jsx)(n.X2,{children:(0,c.jsxs)("div",{className:"form-bottom-action",children:[(0,c.jsx)(n.zx,{variant:"ghost",onClick:()=>{var e;e="/menu/subcategory/list",T?F(!0):h.push(e)},children:u("cancel")}),(0,c.jsx)(n.zx,{"data-testid":"subcategory-edit-submit",type:"submit",disabled:v,variant:"primary",children:"Save Changes"})]})})]})})})})}),(0,c.jsx)(n.RZ,{modal:Q,setModal:F,onLeave:()=>h.push("/menu/subcategory/list")}),S&&!L&&(0,c.jsx)(n.u_,{visible:!0,onClose:()=>O(!0),style:{minWidth:500},children:(0,c.jsx)(o,{contentText:I,isLoading:!1,relations:S,deleteConfirmation:e=>w(e),keys:["menus","items"],onClose:()=>O(!0),onDelete:e=>(async e=>{await $(e)})(e)})})]})}):((0,n.hi)("You have no permissions to update subcategory",{type:"warning"}),(0,c.jsx)(a.l_,{to:"/menu/subcategory/list"}))},Q=e=>{const{t:s}=(0,n.$G)(),t=(0,n.h_)(l.pH.MENU),[a,r]=(0,i.useState)(),[d,u]=(0,i.useState)(!0),[m,h]=(0,i.useState)();return(0,i.useEffect)((()=>{(async()=>{try{const s=await t.get(`/items/relations/${e.meta.id}`);r(s.data)}catch(s){u(!1)}finally{u(!1)}})()}),[]),(0,c.jsx)(n.u_,{visible:!0,onClose:e.onClose,style:{minWidth:500},children:(0,c.jsx)(o,{title:s("item"),isLoading:d,relations:a,deleteConfirmation:e=>h(e),keys:["menus"],onClose:e.onClose,onDelete:async()=>{try{return await t.delete(`/items/${e.meta.id}`,{data:{confirmation:m}}),e.reloadData(e.meta.id),e.onClose()}catch(s){console.log(s)}finally{u(!1)}}})})};const F=function(e,s){let t=e-s;const i=Math.floor(t/1e3/60/60/24);t-=1e3*i*60*60*24;const a=Math.ceil(t/1e3/60/60);return t-=1e3*a*60*60,[i,a]},T="CREATE",W="UPDATE",L=e=>{var s;const{t}=(0,n.$G)(),a=(0,n.h_)(l.pH.MENU),[r,d]=(0,i.useState)(),[o,u]=(0,i.useState)(null),[h,x]=(0,i.useState)([]),[j,g]=(0,i.useState)([]),[b,v]=(0,i.useState)(!1),[y,_]=(0,i.useState)(T),[N,f]=(0,i.useState)(""),[C,Z]=(0,i.useState)(""),E=m(N),{register:w,handleSubmit:S,formState:{errors:I}}=(0,p.cI)({defaultValues:{}});(0,i.useEffect)((()=>{(async()=>{const e=await a.get("/hotel/relations/cities");d(e.data)})(),(async()=>{const s=(await a.get(`/items/item86/${e.meta.id.split("#")[1]}`)).data.hubs;s.length&&_(W);const t=[];(s||[]).map(((e,s)=>{const[i,a]=F(e.end_time,(new Date).getTime()),n=Object.assign({},e,{days:i,hours:a});t.push(n)})),x(t)})()}),[]);const U=e=>{if(!e.length)return[];return(e||[]).map((e=>{e.days||(e.days=0),e.hours||(e.hours=0);const s=null==h?void 0:h.map((e=>e.id)).includes(e.id);if(h.length>0&&s){let s=h.find((s=>s.id===e.id));e.days=Number(s.days),e.hours=Number(s.hours)}return e}))};(0,i.useEffect)((()=>{o&&(async()=>{const e=await a.get(E?`/hotel/relations/hubs/${o}?name=${E}`:`/hotel/relations/hubs/${o}`),s=U(e.data.result);g(s)})()}),[E]);const Q=(e,s,t)=>{if(h.some((s=>s.id===e.id))){e[t]=Number(s);const i=h.findIndex((s=>s.id===e.id)),a=[...h.slice(0,i),e,...h.slice(i+1)];x(a)}};return(0,c.jsxs)("form",{onSubmit:S((async()=>{const s={itemID:e.meta.id.split("#")[1],hubs:h.filter((e=>e.days||e.hours))};try{v(!0),y===T&&await a.post("/items/item86",s),y===W&&await a.patch("/items/item86/edit",s)}catch(C){Z(C.response.data.error)}finally{v(!1)}e.onClose()})),children:[(0,c.jsxs)(n.ZT,{h2:!0,className:"mb-20 mt-20",children:[t("item_name"),": ",e.meta.name]}),(0,c.jsx)(n.iz,{vertical:30}),(0,c.jsxs)(n.ZT,{p:!0,className:"mb-20",children:[t("select_cities_that_apply"),":"]}),(0,c.jsxs)(n.Ph,{value:"",selectProps:{onChange:e=>{(async e=>{f(""),u(e),await(async()=>{const s=await a.get(`/hotel/relations/hubs/${e}`),t=U(s.data.result);g(t)})()})(e.currentTarget.value)}},error:null==(s=I.id)?void 0:s.message,children:[(0,c.jsx)(n.Wx,{value:"",disabled:!0,hidden:!0,children:t("select_city")}),(e=>e.length?(e||[]).map((e=>(0,c.jsx)(n.Wx,{value:e.id,children:e.name},e.id))):null)((null==r?void 0:r.result)||[])]}),(0,c.jsx)(n.iz,{vertical:20}),o&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.ZT,{p:!0,className:"mb-20 mt-20",children:t("selected_hubs")}),(0,c.jsx)(n.NI,{children:(0,c.jsx)("div",{className:"ui-flex even",children:Object.values(h).map((e=>(0,c.jsx)(n.Af,{className:"mb-20 mr-5",size:"medium",onClose:s=>{var t;t=e.id,x(h.filter((e=>e.id!==t)))},children:e.name})))})})]}),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.ZT,{p:!0,className:"mb-20",children:t("hubs_list")}),(0,c.jsx)(n.Vr,{value:N,placeholder:t("search"),className:"mb-20",onChange:e=>f(e.target.value)}),(0,c.jsxs)("div",{className:"ui-flex v-center end",children:[(0,c.jsx)(n.ZT,{p:!0,className:"mb-10 mr-10",style:{minWidth:100},children:"Days"}),(0,c.jsx)(n.ZT,{p:!0,className:"mb-10",style:{minWidth:100},children:"Hours"})]}),(0,c.jsx)("div",{className:"ui-flex even column mb-10",children:(j||[]).map((e=>{var s,t;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"ui-flex between v-center",children:[(0,c.jsx)(n.NI,{children:(0,c.jsx)(n.XZ,{name:`hubs[${e.id}].${e.name}`,label:e.name,onChange:s=>((e,s)=>{if(e.id){if(!s)return x(h.filter((s=>s.id!==e.id)));h.find((s=>s.id===e.id))||x([...h,e])}})(e,s.currentTarget.checked),checked:h.some((s=>s.id===e.id))},e.id)}),(h||[]).some((s=>s.id===e.id))&&(0,c.jsxs)("div",{className:"ui-flex",children:[(0,c.jsx)(n.NI,{className:"mr-10",children:(0,c.jsx)(n.II,{type:"number",min:"0",value:e.days||"",style:{width:100,height:30},onChange:s=>Q(e,s.currentTarget.value,"days"),error:null==I||null==(s=I.days)?void 0:s.message},e.id)}),(0,c.jsx)(n.NI,{children:(0,c.jsx)(n.II,{type:"number",style:{width:100,height:30},max:"23",min:"0",value:e.hours||"",error:null==I||null==(t=I.hours)?void 0:t.message,onChange:s=>Q(e,s.currentTarget.value,"hours")},e.id)})]})]}),(0,c.jsx)(n.iz,{vertical:10})]})}))})]})]}),C&&(0,c.jsx)("div",{className:"mt-20 mb-20",children:(0,c.jsx)(n.Bc,{error:C})}),(0,c.jsxs)("div",{className:"ui-flex v-center end",children:[(0,c.jsx)(n.zx,{size:"large",variant:"ghost",onClick:e.onClose,children:t("cancel")}),(0,c.jsx)(n.zx,{type:"submit",disabled:b,className:"ml-10",size:"large",variant:"primary",children:t("save")})]})]})},O=()=>{var e,s;const{can:t}=(0,i.useContext)(n.Il),{t:r}=(0,n.$G)(),d=(0,n.h_)(l.pH.MENU),o=(0,a.k6)(),[u,j]=(0,i.useState)(),[p,g]=(0,i.useState)(),[b,v]=(0,i.useState)(),[y,_]=(0,i.useState)(""),[N,f]=(0,i.useState)(!1),C=m(y),[Z,E]=(0,i.useState)(!0),w=t(l.g3.MENU.CAN_GET_ITEMS),S=t(l.g3.MENU.CAN_CREATE_ITEM),I=t(l.g3.MENU.CAN_DELETE_ITEM),U=t(l.g3.MENU.CAN_GET_ITEM);(0,i.useEffect)((()=>{if(!w)return;(async()=>{f(!0);const e=await d.get("/items");j(e.data),f(!1)})()}),[]);return(0,n.N7)((()=>{(async()=>{const e=await d.get(C?`/items?name=${C}`:"/items");j(e.data)})()}),[C]),w?N?(0,c.jsx)(n.rj,{gutter:0,children:(0,c.jsx)(n.Zb,{page:!0,children:(0,c.jsx)(n.Od,{parts:["cardHeaderAction","divider","filterTable"]})})}):(0,c.jsx)(n.rj,{gutter:0,children:(0,c.jsxs)(n.X2,{children:[(0,c.jsx)(n.sg,{children:(0,c.jsxs)(n.Zb,{className:"menu-content",page:!0,header:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.ZT,{h2:!0,children:r("items_list")}),S&&(0,c.jsx)(n.zx,{onClick:()=>o.push("/menu/item/create"),children:r("create_new")})]}),children:[(0,c.jsx)("div",{className:"menu-toolbar",children:(0,c.jsx)("div",{className:"menu-toolbar-actions ui-flex start v-center",children:(0,c.jsx)(n.Vr,{value:y,placeholder:r("search"),onChange:e=>_(e.target.value)})})}),(0,c.jsxs)(n.iA,{children:[(0,c.jsx)(n.ss,{children:(0,c.jsxs)(n.SC,{children:[(0,c.jsx)(n.pj,{as:"th",style:{width:60},children:r("image")}),(0,c.jsx)(n.pj,{as:"th",children:r("name")}),(0,c.jsx)(n.pj,{as:"th",children:r("price")}),(0,c.jsx)(n.pj,{as:"th",children:r("description")}),(0,c.jsx)(n.pj,{as:"th",style:{width:50}})]})}),(0,c.jsx)(n.RM,{children:null==u||null==(e=u.result)?void 0:e.map((e=>{var s,t,i;return(0,c.jsxs)(n.SC,{children:[(0,c.jsx)(n.pj,{children:(0,c.jsx)(n.rU,{className:"ui-flex w-100",component:a.rU,to:`/menu/item/manage/${e.id.split("#")[1]}`,children:(0,c.jsx)(n.Ee,{src:`${null==e?void 0:e.image_base_url}/image/400x400/${e.image}`,alt:e.name,width:40,height:40})})}),(0,c.jsx)(n.pj,{children:U?(0,c.jsx)(n.rU,{size:"medium",component:a.rU,to:`/menu/item/manage/${e.id.split("#")[1]}`,children:e.name}):e.name}),(0,c.jsxs)(n.pj,{children:["$",null==(s=Number(e.price))?void 0:s.toFixed(2)]}),(0,c.jsx)(n.pj,{children:(null==(t=e.description)?void 0:t.length)>=80?(null==(i=e.description)?void 0:i.substring(0,80))+"...":e.description}),(0,c.jsx)(n.pj,{children:I&&(0,c.jsx)(n.Lt,{renderTrigger:(e,s)=>(0,c.jsx)(n.Kk,{onClick:e,ref:s,children:(0,c.jsx)(n.JO,{type:"MoreHorizontal01",size:18})}),hasArrow:!0,placement:"right",children:(0,c.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:160},children:[(0,c.jsx)(n.zx,{className:"w-100",variant:"ghost",muted:!0,onClick:()=>{e.id&&(v({resource:"item",id:e.id,name:e.name}),E(!0))},children:"86 Item"}),(0,c.jsx)(n.zx,{className:"w-100",variant:"danger-ghost",muted:!0,onClick:()=>{e.id&&g({resource:"items",id:e.id.split("#")[1]})},children:r("delete")})]})})})]},e.id)}))})]}),(!(null!=u&&u.result)||(null==u||null==(s=u.result)?void 0:s.length)<1)&&!N&&(0,c.jsx)("div",{children:(0,c.jsx)(h,{})})]})}),b&&(0,c.jsx)(n.u_,{visible:Z,onClose:()=>E(!1),style:{minWidth:780},children:(0,c.jsx)(L,{meta:b,onClose:()=>E(!1)})}),p&&(0,c.jsx)(Q,{reloadData:e=>(e=>{if(e){const s=null==u?void 0:u.result;j({result:null==s?void 0:s.filter((s=>s.item_id!==e))})}})(e),meta:p,onClose:()=>g(void 0)})]})}):(0,c.jsx)(x,{entity:"Items"})};var M=t("ggb3"),G=t.n(M),X=t("aiFg"),k=t("ve/6"),z=t("O94r"),B=t.n(z),D=t("vB0K"),A=t.n(D),R=t("LOwH"),V=t.n(R),$=t("H/Mb"),H=t.n($),Y=t("MtWZ"),J=t.n(Y),P=t("j8Os"),K=t.n(P),q=t("i/5k"),ee=t.n(q),se=t("InDy"),te=t.n(se),ie={};ie.styleTagTransform=ee(),ie.setAttributes=J(),ie.insert=H().bind(null,"head"),ie.domAPI=V(),ie.insertStyleElement=K();A()(te(),ie);te()&&te().locals&&te().locals;const ae=["onChange","error","name"],ne=i.forwardRef(((e,s)=>{let{onChange:t,error:a,name:l}=e,r=(0,X.Z)(e,ae);const{t:d}=(0,n.$G)(),[o,u]=(0,i.useState)(null),m=(0,i.useRef)(null),h=(0,k.cR)(s,m);return(0,c.jsxs)("div",{style:{height:20},className:B()("ui-input-file",{"ui-input-error":a}),children:[o?(0,c.jsxs)("div",{className:"ui-flex v-center",children:[(0,c.jsx)("span",{children:o.name}),(0,c.jsx)(n.rU,{component:n.Xd,onClick:e=>{e.preventDefault(),m.current&&(m.current.value=""),u(null),t({target:{name:l,value:null}})},className:"ml-5",children:(0,c.jsx)(n.JO,{type:"Close",size:20})})]}):(0,c.jsxs)("div",{children:[(0,c.jsx)(n.rU,{size:"medium",variant:a?"danger":"primary",component:n.Xd,type:"file",onClick:e=>{var s;e.preventDefault(),null==m||null==(s=m.current)||s.click()},children:d("upload_attachment")}),(0,c.jsx)("input",Object.assign({},r,{ref:h,accept:"image/*",type:"file",onChange:e=>{u(e.target.files[0]),t({target:{name:l,value:e.target.files[0]}})},hidden:!0,style:{display:"none"}}))]}),a&&(0,c.jsx)(n.u,{offset:[0,15],content:a,placement:"right",children:(0,c.jsx)(n.JO,{className:"ml-5",type:"Infoi",size:18})})]})})),le=()=>{var e,s,t,r;const{can:d}=(0,i.useContext)(n.Il),{t:o}=(0,n.$G)(),u=(0,n.h_)(l.pH.MENU),m=(0,a.k6)(),{register:h,handleSubmit:x,watch:j,formState:{errors:b}}=(0,p.cI)({resolver:(0,g.X)(l.f6)}),[v,y]=(0,i.useState)(),[_,N]=(0,i.useState)(),[f,C]=(0,i.useState)(!1),[Z,E]=(0,i.useState)(""),[w,S]=(0,i.useState)(),[I,U]=(0,i.useState)([]),[Q,F]=(0,i.useState)(null),T=d(l.g3.MENU.CAN_CREATE_ITEM),[W,L]=(0,i.useState)(!1),[O,M]=(0,i.useState)(!1);(0,i.useEffect)((()=>{T&&((async()=>{const e=await u.get("/categories");y(e.data)})(),(async()=>{const e=await u.get("/subcategories");N(e.data)})(),(async()=>{const e=await u.get("/modifiers");S(e.data)})(),(async()=>{const e=await u.get("/items/upload/presign-url");F(e.data)})())}),[]);return(0,i.useEffect)((()=>{const e=j(((e,{name:s})=>{s&&M(!0)}));return()=>e.unsubscribe()}),[j]),T?(0,c.jsx)(n.rj,{gutter:0,children:(0,c.jsx)(n.X2,{children:(0,c.jsx)(n.sg,{children:(0,c.jsx)(n.Zb,{className:"menu-content",page:!0,header:(0,c.jsx)(n.ZT,{h2:!0,children:o("create_new_item")}),children:(0,c.jsxs)(n.X2,{children:[(0,c.jsx)(n.sg,{offset:3,size:6,children:(0,c.jsxs)("form",{onSubmit:x((async e=>{let s=0;if(Object.keys(e.subcategories||{}).forEach((t=>{s+=e.subcategories[t].length})),!s)return E(o("subcategory_not_selected_error")),void C(!1);e.modifiers=I,E(""),e.subcategories=Object.values(e.subcategories||{}).reduce(((e,s)=>[...e,...s]),[]);try{var t;C(!0),await G().put(Q.url,e.image),e.image=Q.imagekey;const s=await u.post("/items",e);m.push(`/menu/item/manage/${null==(t=s.data.result)?void 0:t.id}`)}catch(Z){E(o("could_not_create_item"))}finally{C(!1)}})),children:[(0,c.jsx)(n.ZT,{h2:!0,className:"mb-20",children:o("general_information")}),(0,c.jsx)(n.NI,{label:o("item_name"),children:(0,c.jsx)(n.II,Object.assign({"data-testid":"input-item-name",placeholder:o("enter_item_name")},h("name"),{error:null==(e=b.name)?void 0:e.message}))}),(0,c.jsx)(n.NI,{label:o("item_price"),children:(0,c.jsx)(n.II,Object.assign({"data-testid":"input-item-price",type:"number",step:".01",placeholder:"$0.00"},h("price"),{error:null==(s=b.price)?void 0:s.message}))}),(0,c.jsx)(n.NI,{label:o("item_description"),children:(0,c.jsx)(n.II,Object.assign({"data-testid":"input-item-description",placeholder:o("enter_item_description")},h("description"),{error:null==(t=b.description)?void 0:t.message}))}),(0,c.jsx)(n.NI,{children:(0,c.jsx)(n.XZ,Object.assign({"data-testid":"input-needs_cutlery"},h("needs_cutlery"),{label:o("needs_cutlery")}))}),(0,c.jsx)(n.NI,{label:"",children:(0,c.jsx)(n.XZ,Object.assign({"data-testid":"input-guest_view"},h("guest_view"),{label:o("guest_view")}))}),(0,c.jsx)(n.NI,{children:(0,c.jsx)(n.XZ,Object.assign({"data-testid":"input-raw_food"},h("raw_food"),{label:o("raw_food")}))}),(0,c.jsx)(n.NI,{label:o("image"),children:(0,c.jsx)(ne,Object.assign({"data-testid":"input-item-imagefile"},h("image"),{error:null==(r=b.image)?void 0:r.message}))}),(0,c.jsx)(n.iz,{}),(0,c.jsx)(n.ZT,{h2:!0,className:"mb-20",children:o("categories")}),v&&v.result&&v.result.length>0?((null==v?void 0:v.result)||[]).map(((e,s)=>(0,c.jsx)(n.NI,{label:e.name,children:(0,c.jsx)(n.Ph,{multiple:!0,selectProps:h(`subcategories.[${e.id}]`),placeholder:o("select_subcategories"),children:((null==_?void 0:_.result)||[]).filter((s=>s.category.id===e.id)).map((e=>(0,c.jsx)(n.Wx,{value:e.id,children:e.name},e.id)))||null})},s))):(0,c.jsx)(n.ZT,{children:o("no_categories_found")}),(0,c.jsx)(n.iz,{}),(0,c.jsx)(n.ZT,{h2:!0,className:"mb-10",children:o("modifiers")}),w&&w.result&&w.result.length>0?(0,c.jsx)(n.NI,{children:(0,c.jsx)("div",{className:"ui-flex even wrap",children:((null==w?void 0:w.result)||[]).map((e=>(0,c.jsx)("div",{className:"mt-10",children:(0,c.jsx)(n.XZ,{name:e.name,label:e.name,onChange:()=>(e=>{const s={id:e.id,name:e.name},t=I.find((e=>e.id===s.id));return U(t?(I||[]).filter((e=>e.id!==s.id)):[...I,s])})(e)},e.id)},e.id)))})}):(0,c.jsx)(n.ZT,{children:o("no_modifiers_found")}),(0,c.jsx)(n.iz,{vertical:30}),Z&&(0,c.jsx)("div",{className:"my-20",children:(0,c.jsx)(n.Bc,{error:Z})}),(0,c.jsx)(n.X2,{children:(0,c.jsxs)("div",{className:"form-bottom-action",children:[(0,c.jsx)(n.zx,{variant:"ghost",onClick:()=>{var e;e="/menu/item/list",O?L(!0):m.push(e)},children:o("cancel")}),(0,c.jsx)(n.zx,{"data-testid":"item-submit",type:"submit",variant:"primary",disabled:f,children:o("create_new_item")})]})})]})}),(0,c.jsx)(n.RZ,{modal:W,setModal:L,onLeave:()=>m.push("/menu/item/list")})]})})})})}):((0,n.hi)("You have no permissions to create item.",{type:"warning"}),(0,c.jsx)(a.l_,{to:"/menu/item/list"}))};var re=t("vOI0"),ce=t.n(re),de={};de.styleTagTransform=ee(),de.setAttributes=J(),de.insert=H().bind(null,"head"),de.domAPI=V(),de.insertStyleElement=K();A()(ce(),de);ce()&&ce().locals&&ce().locals;const oe=["children"],ue=["disabled","placeholder","children","selectProps","value","name","error"],me=e=>{let{children:s}=e,t=(0,X.Z)(e,oe);return(0,c.jsx)(n.HC,Object.assign({},t,{children:s}))},he=i.forwardRef(((e,s)=>{let{disabled:t,placeholder:a,children:l,selectProps:r,error:d}=e,o=(0,X.Z)(e,ue);const u=(0,i.useRef)(null),m=(0,i.useRef)(null),h=(0,k.cR)(null==r?void 0:r.ref,m),[x,j]=(0,i.useState)([]),p=e=>{if(!m.current)return;const s=e.target.innerHTML;for(let i=0;i<(null==(t=m.current)?void 0:t.options.length);i++){var t;const e=m.current.options[i];e.innerHTML===s&&(e.selected=!e.selected)}m.current.dispatchEvent(new Event("change")),o&&o.onChange&&(null==o||o.onChange(e)),u.current.closeDropdown()};(0,i.useEffect)((()=>{if(!m.current)return;const e=e=>{const s=[];for(let t=0;t<e.target.options.length;t++){const i=e.target.options[t];i.selected&&s.push(i.value)}e.target.defaultValue=s,null==r||null==r.onChange||r.onChange(e),j(s)};return(()=>{const e=[];for(let a=0;a<(null==m||null==(s=m.current)||null==(t=s.options)?void 0:t.length);a++){var s,t,i;const n=null==m||null==(i=m.current)?void 0:i.options[a];null!=n&&n.selected&&e.push(n.value)}j(e)})(),m.current.addEventListener("change",e),()=>{m.current&&m.current.removeEventListener("change",e)}}),[m,r]);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("select",Object.assign({},r,{multiple:!0,ref:h,className:"selectselect",children:i.Children.map(l,((e,s)=>i.isValidElement(e)?i.createElement("option",Object.assign({},e.props,{key:s,onClick:p})):null))})),(0,c.jsx)(n.P7,{ref:u,attachment:"top center",targetAttachment:"bottom center",offset:"1px 0",dropdownComponent:n.Zb,dropdownComponentStyle:{maxHeight:170,overflowY:"auto",borderRadius:0},renderTrigger:(e,s,r)=>{var u;return(0,c.jsxs)("div",Object.assign({},o,{className:B()("ui-select-trigger",{"ui-select-trigger-multiple":!0,"ui-select-open":r,"ui-disabled":t,"ui-select-error":!!d}),onClick:t?void 0:e,ref:s,children:[-1!==(null==m||null==(u=m.current)?void 0:u.selectedIndex)?(0,c.jsx)("div",{className:"ui-select-multi-wrapper",children:i.Children.map(l,((e,s)=>{var t,a;const l=null==m||null==(t=m.current)?void 0:t.options[s];return i.isValidElement(e)&&null!=l&&l.selected?(0,c.jsx)(n.Af,{size:"medium",onClose:t=>{var i;return t.stopPropagation(),((e,s)=>{if(m){var t;const e=null==m||null==(t=m.current)?void 0:t.options[s];var i;e&&(e.selected=!1,null==m||null==(i=m.current)||i.dispatchEvent(new Event("change")))}})(null==(i=e.props)||i.children,s),!1},children:null==(a=e.props)?void 0:a.children}):null}))}):(0,c.jsx)("span",{className:"ui-placeholder",children:a}),(0,c.jsxs)("div",{className:"ui-select-suffix",children:[(0,c.jsx)(n.JO,{type:"ArrowDown",size:12}),!!d&&(0,c.jsx)(n.u,{offset:[0,25],content:d,placement:"right",children:(0,c.jsx)(n.JO,{type:"Infoi",size:18})})]})]}))},className:B()("ui-select",o.className),matchTriggerWidth:!0,children:(0,c.jsx)(n.aV,{children:i.Children.map(l,((e,s)=>i.isValidElement(e)?i.cloneElement(e,{key:s,value:s,selected:x.includes(e.props.value),onClick:p}):null))})})]})})),xe=({item:e})=>{const{t:s}=(0,n.$G)(),t=(0,n.h_)(l.pH.MENU),r=(0,a.k6)(),[d,u]=(0,i.useState)(!1),[m,h]=(0,i.useState)(""),[x,j]=(0,i.useState)(),[g,b]=(0,i.useState)(),[v,y]=(0,i.useState)(),[_,N]=(0,i.useState)(),[f,C]=(0,i.useState)(),[Z,E]=(0,i.useState)({}),{register:w,handleSubmit:S,setValue:I,formState:{errors:U}}=(0,p.cI)({defaultValues:{name:e.name,price:e.price,description:e.description,needs_cutlery:e.needs_cutlery,guest_view:e.guest_view,raw_food:e.raw_food,image:e.image}}),Q={title:s("update_item_categories"),subtitle:s("change_category_of_item_confirm"),info:s("remove_category_affected_warning")};(0,i.useEffect)((()=>{(async()=>{const e=await t.get("/categories");j(e.data)})(),(async()=>{const e=await t.get("/subcategories");b(e.data)})(),F()}),[]);const F=()=>{const s={};for(const[t,i]of Object.entries(e.configs))s[t]=[],Object.keys(i.subcategories).forEach((e=>{s[t].push(e)}));E(s),I("subcategories",s)},T=async i=>{u(!0);const a={type:"categories",subcategories:Object.values(Z).reduce(((e,s)=>[...e,...s]),[]),nonce:i};if(0===a.subcategories.length)return h(s("subcategory_not_selected_error")),void u(!1);try{await t.patch(`/items/${e.id}`,a),r.push(`/menu/item/manage/${e.id}`)}catch(n){n.response.data&&h(n.response.data.message),n.response.data.result&&(C(n.response.data.result),y(!1))}finally{u(!1)}};return x&&g?(0,c.jsx)(n.rj,{gutter:0,children:(0,c.jsxs)(n.X2,{children:[(0,c.jsx)(n.sg,{children:(0,c.jsx)(n.Zb,{className:"menu-content",page:!0,header:(0,c.jsx)(n.ZT,{h2:!0,children:s("update_item_subcategories")}),children:(0,c.jsx)(n.X2,{children:(0,c.jsx)(n.sg,{offset:3,size:6,children:(0,c.jsxs)("form",{onSubmit:S((async()=>{await T()})),children:[((null==x?void 0:x.result)||[]).length>0?((null==x?void 0:x.result)||[]).map(((e,t)=>(0,c.jsx)(n.NI,{label:e.name,children:(0,c.jsx)(he,{selectProps:w(`subcategories.[${e.id}]`),placeholder:s("select_subcategories"),children:((null==g?void 0:g.result)||[]).filter((s=>s.category.id===e.id)).map((e=>(0,c.jsx)(me,{value:e.id,children:e.name},e.id)))||null})},t))):(0,c.jsx)(n.ZT,{children:s("no_categories_found")}),m&&(0,c.jsx)("div",{className:"mt-20",children:(0,c.jsx)(n.Bc,{error:m})}),(0,c.jsx)(n.iz,{vertical:30}),(0,c.jsx)(n.X2,{children:(0,c.jsxs)("div",{className:"form-bottom-action",children:[(0,c.jsx)(n.zx,{variant:"ghost",onClick:()=>{r.push("/menu/items/list")},children:s("cancel")}),(0,c.jsx)(n.zx,{"data-testid":"item-submit",variant:"primary",type:"submit",disabled:d,children:s("save")})]})})]})})})})}),f&&!v&&(0,c.jsx)(n.u_,{visible:!0,onClose:()=>y(!0),style:{minWidth:500},children:(0,c.jsx)(o,{contentText:Q,isLoading:!1,relations:f,deleteConfirmation:e=>N(e),keys:["menus"],onClose:()=>y(!0),onDelete:e=>(async e=>{await T(e)})(e)})})]})}):(0,c.jsxs)(n.rj,{gutter:0,children:[(0,c.jsx)(n.Od,{parts:["header"],className:"pt-10"}),(0,c.jsx)(n.Zb,{page:!0,children:(0,c.jsx)(n.Od,{parts:["cardHeaderAction","divider","labelField","labelField","labelField"]})})]})},je=({item:e})=>{var s,t,r,d;const{t:o}=(0,n.$G)(),u=(0,n.h_)(l.pH.MENU),m=(0,a.k6)(),[h,x]=(0,i.useState)(!1),[j,b]=(0,i.useState)(""),[v,y]=(0,i.useState)(!1),{register:_,handleSubmit:N,watch:f,getValues:C,formState:{errors:Z},control:E}=(0,p.cI)({defaultValues:{name:e.name,price:e.price,description:e.description,needs_cutlery:e.needs_cutlery,guest_view:e.guest_view,raw_food:e.raw_food,image:e.image},resolver:(0,g.X)(l.f6)}),[w,S]=(0,i.useState)(null),I=i.useMemo((()=>e.image),[e]),[U,Q]=(0,i.useState)(!1),[F,T]=(0,i.useState)(!1);(0,i.useEffect)((()=>{const e=f(((e,{name:s})=>{s&&T(!0)}));return()=>e.unsubscribe()}),[f]),(0,i.useEffect)((()=>{(async()=>{const s=await u.get(`/items/upload/presign-url?imagekey=${e.image}`);S(s.data)})()}),[]);return(0,c.jsx)(n.rj,{gutter:0,children:(0,c.jsx)(n.X2,{children:(0,c.jsx)(n.sg,{children:(0,c.jsx)(n.Zb,{className:"menu-content",page:!0,header:(0,c.jsx)("div",{children:(0,c.jsx)(n.ZT,{h2:!0,children:e.name})}),children:(0,c.jsxs)(n.X2,{children:[(0,c.jsx)(n.sg,{offset:3,size:6,children:(0,c.jsxs)("form",{onSubmit:N((async s=>{b(""),x(!0);try{const t={type:"general-information",name:s.name,price:Number(s.price),description:s.description,needs_cutlery:s.needs_cutlery,guest_view:s.guest_view,raw_food:s.raw_food,image:I,labels:[]};v&&s.image&&await G()({method:"PUT",url:w.url,data:s.image}),await u.patch(`/items/${e.id}`,t),m.push(`/menu/item/manage/${e.id}`)}catch(j){b(j.response.data.message)}finally{x(!1)}})),children:[(0,c.jsx)(n.NI,{label:o("item_name"),children:(0,c.jsx)(n.II,Object.assign({"data-testid":"input-item-name",placeholder:o("enter_item_name")},_("name"),{error:null==(s=Z.name)?void 0:s.message}))}),(0,c.jsx)(n.NI,{label:o("item_price"),children:(0,c.jsx)(n.II,Object.assign({type:"number",step:".01",placeholder:"$0.00"},_("price"),{error:null==(t=Z.price)?void 0:t.message}))}),(0,c.jsx)(n.NI,{label:o("item_description"),children:(0,c.jsx)(n.II,Object.assign({placeholder:o("enter_item_description")},_("description"),{error:null==(r=Z.description)?void 0:r.message}))}),(0,c.jsx)(n.NI,{children:(0,c.jsx)(n.XZ,Object.assign({},_("needs_cutlery"),{label:o("needs_cutlery")}))}),(0,c.jsx)(n.NI,{label:"",children:(0,c.jsx)(n.XZ,Object.assign({},_("guest_view"),{label:o("guest_view")}))}),(0,c.jsx)(n.NI,{children:(0,c.jsx)(n.XZ,Object.assign({},_("raw_food"),{label:o("raw_food")}))}),(0,c.jsxs)(n.NI,{label:o("image"),children:[!v&&(0,c.jsx)(n.rU,{target:"_blank",href:`${null==e?void 0:e.image_base_url}/image/400x400/${null==e?void 0:e.image}`,disabled:!(null==e||!e.image),children:(0,c.jsx)(n.Ee,{src:`${null==e?void 0:e.image_base_url}/image/400x400/${null==e?void 0:e.image}`,alt:null==e?void 0:e.image,width:100,height:100})}),(0,c.jsx)(ne,Object.assign({},_("image"),{onChange:e=>{_("image").onChange(e),y(!!e.target.value)},error:null==(d=Z.image)?void 0:d.message}))]}),j&&(0,c.jsx)("div",{className:"mt-20",children:(0,c.jsx)(n.Bc,{error:j})}),(0,c.jsx)(n.iz,{vertical:30}),(0,c.jsx)(n.X2,{children:(0,c.jsxs)("div",{className:"form-bottom-action",children:[(0,c.jsx)(n.zx,{variant:"ghost",onClick:()=>{var e;e="/menu/item/list",F?Q(!0):m.push(e)},children:o("cancel")}),(0,c.jsx)(n.zx,{"data-testid":"item-submit",variant:"primary",type:"submit",disabled:h,children:o("save")})]})})]})}),(0,c.jsx)(n.RZ,{modal:U,setModal:Q,onLeave:()=>m.push("/menu/item/list")})]})})})})})},pe=({item:e})=>{const{t:s}=(0,n.$G)(),t=(0,n.h_)(l.pH.MENU),r=(0,a.k6)(),[d,o]=(0,i.useState)(!1),[u,m]=(0,i.useState)(""),[h,x]=(0,i.useState)([]),[j,g]=(0,i.useState)(),{register:b,handleSubmit:v,formState:{errors:y},control:_}=(0,p.cI)();(0,i.useEffect)((()=>{(async()=>{const e=await t.get("/modifiers");g(e.data)})(),x(e.modifiers)}),[]);return(0,c.jsx)(n.rj,{gutter:0,children:(0,c.jsx)(n.X2,{children:(0,c.jsx)(n.sg,{children:(0,c.jsx)(n.Zb,{className:"menu-content",page:!0,header:(0,c.jsx)(n.ZT,{h2:!0,children:s("add_modifiers_to_item")}),children:(0,c.jsx)(n.X2,{children:(0,c.jsx)(n.sg,{offset:3,size:6,children:(0,c.jsxs)("form",{onSubmit:v((async()=>{const s={type:"modifiers",modifiers:h};await t.patch(`/items/${e.id}`,s),r.push(`/menu/item/manage/${e.id}`)})),children:[0===(null==(N=(null==j?void 0:j.result)||[])?void 0:N.length)?(0,c.jsx)(n.ZT,{children:s("no_modifiers_found")}):((null==j?void 0:j.result)||[]).map((e=>{return(0,c.jsx)(n.NI,{children:(0,c.jsx)("div",{children:(0,c.jsx)(n.XZ,{name:e.name,label:e.name,checked:(s=e.id,!!h.find((e=>e.id===s))),onChange:()=>(e=>{const s={id:e.id,name:e.name},t=h.find((e=>e.id===s.id));return x(t?(h||[]).filter((e=>e.id!==s.id)):[...h,s])})(e)})})},e.id);var s})),u&&(0,c.jsx)("div",{className:"mt-20",children:(0,c.jsx)(n.Bc,{error:u})}),(0,c.jsx)(n.iz,{vertical:30}),(0,c.jsx)(n.X2,{children:(0,c.jsxs)("div",{className:"form-bottom-action",children:[(0,c.jsx)(n.zx,{variant:"ghost",onClick:()=>{r.push("/menu/item/list")},children:s("cancel")}),(0,c.jsx)(n.zx,{"data-testid":"item-submit",variant:"primary",type:"submit",disabled:d,children:s("save")})]})})]})})})})})})});var N};let ge;!function(e){e.CATEGORY="category",e.GENERAL_INFORMATION="general-information",e.MODIFIER="modifier"}(ge||(ge={}));const be=()=>{const{can:e}=(0,i.useContext)(n.Il),{t:s}=(0,n.$G)(),t=(0,n.h_)(l.pH.MENU),r=(0,a.UO)(),[d,o]=(0,i.useState)(),[u,m]=(0,i.useState)(!0);(0,i.useEffect)((()=>{(async()=>{const e=await t.get(`/items/${r.id}`);o(e.data),m(!1)})()}),[r.id]);return e(l.g3.MENU.CAN_GET_ITEM)?u?(0,c.jsx)(n.rj,{gutter:0,children:(0,c.jsx)(n.Zb,{page:!0,children:(0,c.jsx)(n.Od,{parts:["cardHeaderAction","divider","labelField","labelField","labelField"]})})}):null!=d&&d.result?((e,t)=>{switch(e){case ge.GENERAL_INFORMATION:return(0,c.jsx)(je,{item:t});case ge.CATEGORY:return(0,c.jsx)(xe,{item:t});case ge.MODIFIER:return(0,c.jsx)(pe,{item:t})}return(0,c.jsx)(c.Fragment,{children:s("not_found")})})(r.type,null==d?void 0:d.result):(0,c.jsx)(c.Fragment,{}):((0,n.hi)("You have no permissions to view this item.",{type:"warning"}),(0,c.jsx)(a.l_,{to:"/menu/item/list"}))},ve=(e,s)=>{const{can:t}=(0,i.useContext)(n.Il),{t:r}=(0,n.$G)(),d=(0,a.k6)(),o=t(l.g3.MENU.CAN_PATCH_ITEM);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.ZT,{h2:!0,children:e}),o&&(0,c.jsx)(n.rU,{component:n.Xd,onClick:()=>d.push(s),children:r("edit")})]})},ye=e=>e?"Yes":"No",_e=({item:e})=>{const{t:s}=(0,n.$G)();return(0,c.jsx)(n.Zb,{className:"menu-content",page:!0,header:ve("General information",`/menu/item/editor/${ge.GENERAL_INFORMATION}/${null==e?void 0:e.id}`),children:(0,c.jsx)(n.X2,{className:"mt-30",gutterY:0,children:(0,c.jsxs)("div",{className:"ui-flex",children:[(0,c.jsx)("div",{className:"mr-30",children:(0,c.jsx)(n.Ee,{src:`${null==e?void 0:e.image_base_url}/image/400x400/${null==e?void 0:e.image}`,alt:null==e?void 0:e.image,width:100,height:100})}),(0,c.jsxs)(n.X2,{cols:1,className:"mt-0",children:[(0,c.jsxs)(n.sg,{className:"mt-0",children:[(0,c.jsx)(n.ZT,{className:"mb-5",size:"small",p:!0,muted:!0,children:s("name")}),(0,c.jsx)(n.ZT,{children:null==e?void 0:e.name})]}),(0,c.jsxs)(n.sg,{children:[(0,c.jsx)(n.ZT,{className:"mb-5",size:"small",p:!0,muted:!0,children:s("price")}),(0,c.jsxs)(n.ZT,{children:["$",null==e?void 0:e.price]})]}),(0,c.jsxs)(n.sg,{children:[(0,c.jsx)(n.ZT,{className:"mb-5",size:"small",p:!0,muted:!0,children:s("description")}),(0,c.jsx)(n.ZT,{children:null==e?void 0:e.description})]}),(0,c.jsxs)(n.sg,{children:[(0,c.jsx)(n.ZT,{className:"mb-5",size:"small",p:!0,muted:!0,children:s("needs_cutlery")}),(0,c.jsx)(n.ZT,{"data-testid":"menu-item-needs_cutlery",children:ye(null==e?void 0:e.needs_cutlery)})]}),(0,c.jsxs)(n.sg,{children:[(0,c.jsx)(n.ZT,{className:"mb-5",size:"small",p:!0,muted:!0,children:s("guest_view")}),(0,c.jsx)(n.ZT,{"data-testid":"menu-item-guest_view",children:ye(null==e?void 0:e.guest_view)})]}),(0,c.jsxs)(n.sg,{children:[(0,c.jsx)(n.ZT,{className:"mb-5",size:"small",p:!0,muted:!0,children:s("raw_food")}),(0,c.jsx)(n.ZT,{"data-testid":"menu-item-raw_food",children:ye(null==e?void 0:e.raw_food)})]})]})]})})})},Ne=(e,s)=>{const t=((e,s)=>{const t=e;return s.forEach((e=>{t[e.category.id]&&(t[e.category.id].name=e.category.name,t[e.category.id].subcategories[e.id]&&(t[e.category.id].subcategories[e.id]={name:e.name}))})),t})(e.configs,s);return Object.keys(t).map((e=>(0,c.jsxs)("div",{className:"mt-20",children:[(0,c.jsx)(n.ZT,{p:!0,muted:!0,children:t[e].name}),(0,c.jsx)(n.sg,{className:"",children:Object.keys(t[e].subcategories).map(((s,i)=>(0,c.jsx)(n.ZT,{"data-testid":`menu-item-subcategory-${i}`,size:"large",p:!0,className:"mb-5",children:t[e].subcategories[s].name},s)))})]},e)))},fe=({item:e})=>{const s=(0,n.h_)(l.pH.MENU),[t,a]=(0,i.useState)();return(0,i.useEffect)((()=>{(async()=>{const e=await s.get("/subcategories");a(e.data)})()}),[]),(0,c.jsx)(n.Zb,{className:"menu-content",page:!0,header:ve("Categories",`/menu/item/editor/${ge.CATEGORY}/${e.id}`),children:(null==t?void 0:t.result)&&Ne(e,null==t?void 0:t.result)})},Ce=e=>(0,c.jsx)(n.sg,{children:null==e?void 0:e.map((e=>(0,c.jsx)(n.ZT,{size:"large",p:!0,className:"mb-5",children:e.name},e.id)))}),Ze=({item:e})=>(0,c.jsx)(n.Zb,{className:"menu-content",page:!0,header:ve("Modifiers",`/menu/item/editor/${ge.MODIFIER}/${e.id}`),children:e&&Ce(e.modifiers)}),Ee=()=>{const{can:e}=(0,i.useContext)(n.Il),s=(0,n.h_)(l.pH.MENU),{id:t}=(0,a.UO)(),[r,d]=(0,i.useState)(),[o,u]=(0,i.useState)(!1);return(0,i.useEffect)((()=>{(async()=>{try{u(!0);const e=await s.get(`/items/${t}`);d(e.data),u(!1)}catch(e){}})()}),[t]),e(l.g3.MENU.CAN_GET_ITEM)?o?(0,c.jsx)(n.rj,{gutter:0,className:"menu-container",children:(0,c.jsx)(n.X2,{children:(0,c.jsxs)(n.sg,{children:[(0,c.jsx)(n.Zb,{page:!0,children:(0,c.jsx)(n.Od,{parts:["cardHeaderAction","divider","labelField"]})}),(0,c.jsx)(n.Zb,{page:!0,children:(0,c.jsx)(n.Od,{parts:["cardHeaderAction","divider","labelField"]})}),(0,c.jsx)(n.Zb,{page:!0,children:(0,c.jsx)(n.Od,{parts:["cardHeaderAction","divider","labelField"]})})]})})}):(0,c.jsx)(n.rj,{gutter:0,className:"menu-container",children:(0,c.jsx)(n.X2,{children:(0,c.jsxs)(n.sg,{children:[(null==r?void 0:r.result)&&(0,c.jsx)(_e,{item:null==r?void 0:r.result}),(null==r?void 0:r.result)&&(0,c.jsx)(fe,{item:null==r?void 0:r.result}),(null==r?void 0:r.result)&&(0,c.jsx)(Ze,{item:null==r?void 0:r.result})]})})}):((0,n.hi)("You have no permissions to view this item.",{type:"warning"}),(0,c.jsx)(a.l_,{to:"/menu/item/list"}))},we=e=>{const{t:s}=(0,n.$G)(),t=(0,n.h_)(l.pH.MENU),[a,r]=(0,i.useState)(!1);return(0,c.jsxs)(n.u_,{visible:!0,onClose:e.onClose,style:{minWidth:360},children:[(0,c.jsx)("h3",{children:s("delete_modifier")}),(0,c.jsx)(n.iz,{}),(0,c.jsx)("span",{children:s("delete_modifier_confirm")}),(0,c.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:30},children:[(0,c.jsx)(n.zx,{size:"large",variant:"ghost",onClick:e.onClose,children:s("cancel")}),(0,c.jsx)(n.zx,{disabled:a,size:"large",variant:"danger",style:{marginLeft:20},onClick:()=>{(async()=>{r(!0);if(!0===(await t.delete(`/modifiers/${e.meta.id}`)).data.result)e.reloadData(e.meta.id),e.onClose()})()},children:s("delete")})]})]})},Se=()=>{var e,s;const{can:t}=(0,i.useContext)(n.Il),{t:r}=(0,n.$G)(),d=(0,n.h_)(l.pH.MENU),o=(0,a.k6)(),[u,j]=(0,i.useState)(),[p,g]=(0,i.useState)(),[b,v]=(0,i.useState)(""),[y,_]=(0,i.useState)(!0),N=m(b),f=t(l.g3.MENU.CAN_GET_MODIFIERS),C=t(l.g3.MENU.CAN_CREATE_MODIFIER),Z=t(l.g3.MENU.CAN_DELETE_MODIFIER);(0,i.useEffect)((()=>{f&&(async()=>{const e=await d.get("/modifiers");j(e.data),_(!1)})()}),[]),(0,n.N7)((()=>{(async()=>{const e=await d.get(N?`/modifiers?name=${N}`:"/modifiers");j(e.data)})()}),[N]);return f?y?(0,c.jsx)(n.rj,{gutter:0,children:(0,c.jsx)(n.Zb,{page:!0,children:(0,c.jsx)(n.Od,{parts:["cardHeaderAction","divider","filterTable"]})})}):(0,c.jsx)(n.rj,{gutter:0,children:(0,c.jsxs)(n.X2,{children:[(0,c.jsx)(n.sg,{children:(0,c.jsxs)(n.Zb,{className:"menu-content",page:!0,header:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.ZT,{h2:!0,children:"Modifiers List"}),C&&(0,c.jsx)(n.zx,{onClick:()=>o.push("/menu/modifier/editor"),children:r("create_new")})]}),children:[(0,c.jsx)("div",{className:"menu-toolbar",children:(0,c.jsx)("div",{className:"menu-toolbar-actions ui-flex start v-center",children:(0,c.jsx)(n.Vr,{value:b,placeholder:r("search"),onChange:e=>v(e.target.value)})})}),(0,c.jsxs)(n.iA,{children:[(0,c.jsx)(n.ss,{children:(0,c.jsxs)(n.SC,{children:[(0,c.jsx)(n.pj,{as:"th",children:r("name")}),(0,c.jsx)(n.pj,{as:"th",children:r("options")}),(0,c.jsx)(n.pj,{as:"th",style:{width:50}})]})}),(0,c.jsx)(n.RM,{children:null==u||null==(e=u.result)?void 0:e.map((e=>{var s;return(0,c.jsxs)(n.SC,{children:[(0,c.jsx)(n.pj,{children:(0,c.jsx)(n.rU,{size:"medium",component:a.rU,to:`/menu/modifier/view/${e.id}`,children:e.name})}),(0,c.jsx)(n.pj,{children:null==(s=e.options)?void 0:s.map((e=>e.name)).join(" / ")}),(0,c.jsx)(n.pj,{children:Z&&(0,c.jsx)(n.Lt,{renderTrigger:(e,s)=>(0,c.jsx)(n.Kk,{onClick:e,ref:s,children:(0,c.jsx)(n.JO,{type:"MoreHorizontal01",size:18})}),hasArrow:!0,placement:"right",children:(0,c.jsx)("div",{className:"ui-flex column",style:{width:160},children:(0,c.jsx)(n.zx,{className:"w-100",variant:"danger-ghost",muted:!0,onClick:()=>{e.id&&g({resource:"modifier",id:e.id})},children:r("delete")})})})})]},e.id)}))})]}),(!(null!=u&&u.result)||(null==u||null==(s=u.result)?void 0:s.length)<1)&&!y&&(0,c.jsx)("div",{children:(0,c.jsx)(h,{})})]})}),p&&(0,c.jsx)(we,{reloadData:e=>(e=>{if(e){const s=null==u?void 0:u.result;j({result:null==s?void 0:s.filter((s=>s.id!==e))})}})(e),meta:p,onClose:()=>g(void 0)})]})}):(0,c.jsx)(x,{entity:"Modifiers"})};let Ie={};const Ue=({itemEditing:e,categoryId:s,menuState:t,activeTab:a,close:l,onSave:r})=>{var d;const{t:o}=(0,n.$G)(),[u,m]=(0,i.useState)({}),[h,x]=(0,i.useState)(e.suggested_items||[]),[j,p]=(0,i.useState)(!1),[g,b]=(0,i.useState)(""),[v,y]=(0,i.useState)(e.is_popular||!1),[_,N]=(0,i.useState)(e.is_favorite||!1),[f,C]=(0,i.useState)({price:e.price,old_price:e.old_price}),[Z,E]=(0,i.useState)(null);(0,i.useEffect)((()=>{const e={};Object.keys(t.addedItems[s].subcategories).forEach((i=>{Object.keys(t.addedItems[s].subcategories[i].items).forEach((a=>{e[a]=t.addedItems[s].subcategories[i].items[a]}))})),Ie=e,m(e)}),[t.addedItems]);return(0,c.jsxs)("div",{className:"ui-flex w-100 column",children:[(0,c.jsx)(n.ZT,{h2:!0,children:e.name}),(0,c.jsx)(n.rj,{className:"mt-30",gutter:0,children:(0,c.jsxs)(n.X2,{children:[(0,c.jsx)(n.sg,{children:(0,c.jsx)(n.XZ,{label:o("is_popular"),checked:v,onChange:e=>{y(e.target.checked)}})}),(0,c.jsx)(n.sg,{children:(0,c.jsx)(n.XZ,{label:o("is_favorite"),checked:_,onChange:e=>{N(e.target.checked)}})})]})}),(0,c.jsx)(n.iz,{vertical:30}),(0,c.jsx)(n.ZT,{className:"mb-20",p:!0,children:o("item_price")}),(0,c.jsxs)("div",{className:"ui-flex v-center",children:[f.old_price&&(0,c.jsxs)(n.ZT,{className:"mr-10 ui-text-line",muted:!0,children:["$",Number(f.old_price).toFixed(2)]}),(0,c.jsxs)(n.ZT,{className:"mr-20",children:["$",null==(d=Number(f.price))?void 0:d.toFixed(2)]}),j?(0,c.jsxs)("div",{className:"ui-flex v-center",children:[(0,c.jsx)(n.II,{style:{width:100},placeholder:"$0.00",step:1,min:"0.00",type:"number",error:Z||"",onChange:e=>{b(e.currentTarget.value),E(null)}}),(0,c.jsx)(n.rU,{className:"ml-10",component:n.Xd,onClick:()=>{Number(g)===e.price?E(o("same_price_error")):Number(g)<(e.old_price||e.price)?E(o("lower_price_error")):(C({price:Number(g),old_price:e.old_price||Number(e.price)}),p(!1))},size:"medium",children:o("save")})]}):(0,c.jsx)(n.rU,{component:n.Xd,onClick:()=>p(!0),size:"medium",children:o("edit")})]}),(0,c.jsx)(n.iz,{vertical:30}),(0,c.jsx)(n.ZT,{className:"mb-30",p:!0,children:o("sugessted_items")}),(0,c.jsxs)("div",{className:"menu-item-suggested-list ui-flex column v-start",children:[h.length>0?(0,c.jsx)("div",{className:"menu-selected-chips",children:h.map((e=>u[e]?(0,c.jsx)(n.Af,{onClose:()=>(e=>{x(h.filter((s=>s!==e)))})(e),children:u[e].name},e):null))}):(0,c.jsx)(n.ZT,{muted:!0,children:o("no_sugessted_items")}),(0,c.jsx)("div",{className:"mb-20"}),(0,c.jsx)(n.iz,{vertical:15}),(0,c.jsx)(n.Vr,{className:"mb-20",placeholder:o("search"),onChange:e=>{const s={};Object.values(Ie).forEach((t=>{t.name.toLowerCase().includes(e.currentTarget.value.toLowerCase())&&(s[t.id]=t)})),m(s)}}),(0,c.jsx)("div",{className:"menu-suggested-chips w-100 ui-flex column v-start pl-10",children:Object.values(u).map(((s,t)=>s.id===e.id||h.includes(s.id)?null:(0,c.jsxs)("div",{className:"menu-select-chip-wrapper w-100",children:[(0,c.jsx)(n.iz,{vertical:15}),(0,c.jsxs)("div",{className:"w-100 ui-flex v-center between",children:[(0,c.jsx)(n.ZT,{className:"mr-20",children:s.name}),(0,c.jsx)(n.zx,{onClick:()=>{return e=s.id,void x([...h||[],e]);var e},size:"small",variant:"ghost",iconOnly:!0,children:(0,c.jsx)(n.JO,{type:"Plus",size:20})})]})]},s.id)))})]}),(0,c.jsx)(n.iz,{vertical:30}),(0,c.jsxs)("div",{className:"ui-flex end",children:[(0,c.jsx)(n.zx,{variant:"ghost",onClick:l,size:"medium",children:o("cancel")}),(0,c.jsx)(n.zx,{className:"ml-10",size:"medium",onClick:()=>{delete e.old_price,r(Object.assign({},e,f.price?{price:f.price}:{},f.old_price&&f.old_price!==f.price?{old_price:f.old_price}:{},{subcategory:a,category:s,suggested_items:h,is_favorite:_,is_popular:v}))},children:o("save")})]})]})},Qe=({subcategories:e,onTabClick:s,activeTab:t,onReorder:a,sortedSubcategoriesInput:l})=>{const[r,d]=(0,i.useState)(null),[o,u]=(0,i.useState)(null),[m,h]=(0,i.useState)(l);(0,i.useEffect)((()=>{h(l)}),[l]);const x=e=>{e.dataTransfer.setData("text/plain",e.currentTarget.id);const s=e.currentTarget.getAttribute("data-order");setTimeout((()=>{d(s)}),0)},j=e=>{e.currentTarget.getAttribute("data-order")&&u(e.currentTarget.getAttribute("data-order")),e.preventDefault(),e.stopPropagation()},p=e=>{e.preventDefault(),u(null),d(null)},g=()=>{if(r){const e=parseInt(r)-1,s=[...l],t=s.splice(e,1);s.splice(0,0,t[0]),h(s),a(s)}u(null),d(null)},b=()=>{if(r&&o){let e=parseInt(r),s=parseInt(o);e>s?e-=1:(e-=1,s-=1);const t=[...l],i=t.splice(e,1);t.splice(s,0,i[0]),h(t),a(t)}u(null),d(null)};return(0,c.jsx)("div",{className:"menu-ordered-list ui-border-right p-10",children:m.length&&m.map(((a,l)=>{const d=Object.assign({},e[a]);return d.order=l+1,(0,c.jsxs)(i.Fragment,{children:[0===l&&(0,c.jsx)("div",{onDragOverCapture:j,onDrop:g,className:B()("w-100 menu-drop-indicator ui-rounded",{active:!!r&&`${d.order}`===o&&`${d.order}`!==r})}),(0,c.jsxs)(n.Xd,{className:B()("ui-flex w-100 px-10 menu-sub-order-item ui-rounded",{"drag-active":!!o&&o!==`${d.order}`&&r===`${d.order}`,active:t===a}),draggable:!0,onDragStartCapture:x,onDragOverCapture:j,onDragEnd:p,onDrop:b,"data-order":d.order,"data-id":a,onClick:s,children:[(0,c.jsx)(n.JO,{type:"Drag",size:30,className:"mr-10"}),d.name]}),(0,c.jsx)("div",{onDragOverCapture:j,onDrop:b,className:B()("w-100 menu-drop-indicator ui-rounded",{active:!!r&&`${d.order}`===o&&`${d.order}`!==r})})]},a)}))})},Fe=({className:e,categoryId:s,updateItems:t,removeItem:a,addItem:l,reorderSubcategory:r,menuState:d,itemEdit:o})=>{var u;const{t:m}=(0,n.$G)(),[h,x]=(0,i.useState)({}),[j,p]=(0,i.useState)(null),[g,b]=(0,i.useState)(null),[v,y]=(0,i.useState)([]),[_,N]=(0,i.useState)({}),[f,C]=(0,i.useState)([]);(0,i.useEffect)((()=>{const e=Object.keys(d.categories[s].subcategories).sort(((e,t)=>d.categories[s].subcategories[e].order-d.categories[s].subcategories[t].order));p(e[0])}),[]),(0,i.useEffect)((()=>{var e;const t=Object.keys(d.categories[s].subcategories).sort(((e,t)=>d.categories[s].subcategories[e].order-d.categories[s].subcategories[t].order));N((null==(e=d.categories[s])?void 0:e.subcategories)||{}),C(t)}),[s,d]),(0,i.useEffect)((()=>{var e,t,i,a;j&&(y((null==(e=d.categories[s])||null==(t=e.subcategories[j])?void 0:t.items)||[]),x((null==(i=d.addedItems[s])||null==(a=i.subcategories[j])?void 0:a.items)||{}))}),[j,d.addedItems]);const Z=e=>{const t=e.currentTarget.getAttribute("data-id");t&&j&&a(Object.assign({},h[t],{subcategory:j,category:s}))};return(0,c.jsxs)(n.zF,{title:d.categories[s].name,className:e,open:!0,children:[(0,c.jsxs)("div",{className:"ui-flex",children:[(0,c.jsx)(Qe,{onReorder:e=>{r({category:s,subcategories:e})},sortedSubcategoriesInput:f,onTabClick:e=>{const s=e.currentTarget.getAttribute("data-id");s&&p(s)},activeTab:j||"",subcategories:_}),(0,c.jsx)("div",{className:"p-20 w-100",children:j&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.ZT,{h2:!0,children:null==(u=d.categories[s].subcategories[j])?void 0:u.name}),(0,c.jsx)(n.ZT,{size:"large",className:"ui-flex mt-30 mb-20",children:m("added_items")}),(0,c.jsx)(n.rj,{gutter:0,children:(0,c.jsx)(n.X2,{colsLg:2,colsXl:3,colsXxl:4,gutter:5,children:(Object.keys(h)||[]).length>0?Object.keys(h).map((e=>{var s,t,i;const a=h[e];return(0,c.jsx)(n.sg,{children:(0,c.jsxs)("div",{className:"ui-rounded p-10 ui-flex w-100 ui-border",children:[(0,c.jsx)(n.Ee,{alt:a.name,src:`${null==a?void 0:a.image_base_url}/image/400x400/${a.image}`,width:57,height:57,className:"menu-item-card-image ui-rounded mr-10"}),(0,c.jsxs)("div",{className:"menu-item-card-content w-100 ui-flex between column",children:[(0,c.jsxs)("div",{className:"menu-item-card-header ui-flex between v-start",children:[(0,c.jsx)(n.ZT,{size:"large",children:a.name}),(0,c.jsx)(n.Xd,{"data-id":a.id,onClick:Z,children:(0,c.jsx)(n.JO,{type:"Close",size:20})})]}),(0,c.jsxs)("div",{className:"menu-item-card-body",children:[a.old_price&&(0,c.jsxs)(n.ZT,{className:"mt-10 ui-text-line pr-5",muted:!0,children:["$",Number(a.old_price).toFixed(2)]}),(0,c.jsxs)(n.ZT,{className:"mt-10",children:["$",null==(s=Number(a.price))?void 0:s.toFixed(2)]})]}),(0,c.jsxs)("div",{className:"menu-item-card-footer ui-flex between w-100 v-end",children:[o&&(0,c.jsxs)(n.ZT,{muted:!0,children:[null!=(t=a.suggested_items)&&t.length?null==(i=a.suggested_items)?void 0:i.length:m("no")," ",m("sugessted_items")]}),o&&(0,c.jsx)(n.rU,{component:n.Xd,onClick:()=>(e=>{b(e)})(a),size:"medium",children:m("edit")})]})]})]})},a.id)})):(0,c.jsx)(n.ZT,{muted:!0,children:m("no_items_added")})})}),(0,c.jsx)(n.iz,{vertical:30}),(0,c.jsx)(n.ZT,{size:"large",className:"ui-flex mb-30",children:m("add_items")}),(0,c.jsxs)(n.iA,{children:[(0,c.jsx)(n.ss,{children:(0,c.jsxs)(n.SC,{children:[(0,c.jsx)(n.pj,{as:"th",style:{width:50}}),(0,c.jsx)(n.pj,{as:"th",style:{width:60}}),(0,c.jsx)(n.pj,{as:"th",style:{width:250},children:m("item_name")}),(0,c.jsx)(n.pj,{as:"th",children:m("price")})]})}),(0,c.jsx)(n.RM,{children:Object.keys(h).length!==v.length?v.map((e=>{var t;return h[e.id]?null:(0,c.jsxs)(n.SC,{children:[(0,c.jsx)(n.pj,{children:(0,c.jsx)(n.Kk,{onClick:()=>l(Object.assign({},e,{subcategory:j,subcategory_name:d.categories[s].subcategories[j].name,category:s})),children:(0,c.jsx)(n.JO,{type:"Plus",size:20})})}),(0,c.jsx)(n.pj,{children:(0,c.jsx)(n.Ee,{alt:e.name,src:`${null==e?void 0:e.image_base_url}/image/400x400/${e.image}`,width:35,height:35})}),(0,c.jsx)(n.pj,{children:e.name}),(0,c.jsxs)(n.pj,{children:["$",null==(t=Number(e.price))?void 0:t.toFixed(2)]})]},e.id)})):(0,c.jsx)("tr",{children:(0,c.jsx)("td",{style:{height:45},colSpan:4,className:"text-center py-10",children:(0,c.jsx)(n.ZT,{muted:!0,children:m("no_more_items_to_add")})})})})]})]})})]}),(0,c.jsx)(n.u_,{visible:g,onClose:()=>b(null),style:{width:500},children:g&&(0,c.jsx)(Ue,{itemEditing:g,menuState:d,categoryId:s,activeTab:j,close:()=>b(null),onSave:e=>{t(e),b(null)}})})]})};const Te=function(e,s){switch(s.type){case"add-item":var t,i,a,n;return Object.assign({},e,{addedItems:Object.assign({},e.addedItems,{[s.payload.category]:Object.assign({},e.addedItems[s.payload.category],{subcategories:Object.assign({},null==(t=e.addedItems[s.payload.category])?void 0:t.subcategories,{[s.payload.subcategory]:Object.assign({},null==(i=e.addedItems[s.payload.category])?void 0:i.subcategories[s.payload.subcategory],{items:Object.assign({},null==(a=e.addedItems[s.payload.category])||null==(n=a.subcategories[s.payload.subcategory])?void 0:n.items,{[s.payload.id]:s.payload})})})})})});case"remove-item":var l,r,c,d,o;if(null==(l=e.addedItems[s.payload.category])||(null==(r=l.subcategories[s.payload.subcategory])||delete r.items[s.payload.id]),0===Object.keys((null==(c=e.addedItems[s.payload.category])||null==(d=c.subcategories[s.payload.subcategory])?void 0:d.items)||{}).length)null==(o=e.addedItems[s.payload.category])||delete o.subcategories[s.payload.subcategory];return Object.keys(e.addedItems).forEach((t=>{const i=e.addedItems[t].subcategories;Object.keys(i).forEach((e=>{const t=i[e].items;Object.keys(t).forEach((e=>{var i;t[e].suggested_items&&(t[e].suggested_items=null==(i=t[e].suggested_items)?void 0:i.filter((e=>e!==s.payload.id)),t[e].suggested_items.length||delete t[e].suggested_items)}))}))})),Object.assign({},e);case"add-update-item":var u,m,h,x;return Object.assign({},e,{addedItems:Object.assign({},e.addedItems,{[s.payload.category]:Object.assign({},e.addedItems[s.payload.category],{subcategories:Object.assign({},null==(u=e.addedItems[s.payload.category])?void 0:u.subcategories,{[s.payload.subcategory]:Object.assign({},null==(m=e.addedItems[s.payload.category])?void 0:m.subcategories[s.payload.subcategory],{items:Object.assign({},null==(h=e.addedItems[s.payload.category])||null==(x=h.subcategories[s.payload.subcategory])?void 0:x.items,{[s.payload.id]:s.payload})})})})})});case"reorder-subcategory":return s.payload.subcategories.forEach(((t,i)=>{var a;e.categories[s.payload.category].subcategories[t].order=i+1,null!=(a=e.addedItems[s.payload.category])&&a.subcategories[t]&&(e.addedItems[s.payload.category].subcategories[t].order=i+1)})),Object.assign({},e);case"set-menu":return s.payload;default:throw new Error}},We=e=>{const s={subcategories:{}};return Object.keys(e.addedItems).forEach((t=>{s.subcategories=Object.assign({},s.subcategories,e.addedItems[t].subcategories),0===Object.keys(e.addedItems[t].subcategories).length&&delete s.subcategories[t]})),s};var Le=t("p+Yr"),Oe=t.n(Le),Me={};Me.styleTagTransform=ee(),Me.setAttributes=J(),Me.insert=H().bind(null,"head"),Me.domAPI=V(),Me.insertStyleElement=K();A()(Oe(),Me);Oe()&&Oe().locals&&Oe().locals;const Ge=()=>{const{can:e}=(0,i.useContext)(n.Il),{t:s}=(0,n.$G)(),t=(0,n.h_)(l.pH.MENU),r=(0,n.h_)(l.pH.NETWORK),d=[{name:"hotel",queryParamName:"hotelIds",data:async()=>{var e,s;const t=await r.get("/hotels"),i=[];return null==t||null==(e=t.data)||null==(s=e.result)||s.forEach((e=>{i.push({label:e.name,queryParamValue:e.id||""})})),i}}],o=(0,a.k6)(),[u,x]=(0,i.useState)(),[j,p]=(0,i.useState)([]),[g,b]=(0,i.useState)(""),[v,y]=(0,i.useState)(""),[_,N]=(0,i.useState)(!0),f=m(v),[C,E]=(0,i.useState)(!1),[w,S]=(0,i.useState)(""),[I,U]=(0,i.useReducer)(Te,{addedItems:{},itemsToSelect:{},categories:{},loading:!0,error:null}),Q=e(l.g3.MENU.CAN_BATCH_EDIT_MENU);(0,i.useEffect)((()=>{b(o.location.search)}),[]),(0,i.useEffect)((()=>{(async()=>{const e=Z().parse(o.location.search.replace("?","").replace(/\|([^&]*)&?/g,"&"));let s=decodeURIComponent(Z().stringify(e)).replace(/\|([^&]*)&?/g,"&");const i=await t.get(f?`?name=${f}&${s}`:`/?${s}`);x(i.data.result),N(!1)})()}),[g,f]);(0,i.useEffect)((()=>{(async()=>{try{const e=await t.get("/items/category-subcategories/subcategories");U({type:"set-menu",payload:{addedItems:{},categories:e.data.result,loading:!1}})}catch(w){U({type:"set-menu",payload:{error:w.message,loading:!1}})}})()}),[]);const F=e=>{U({type:"add-update-item",payload:e})},T=e=>{U({type:"remove-item",payload:e})},W=e=>{U({type:"add-item",payload:e})},L=e=>{U({type:"reorder-subcategory",payload:e})},O=e=>e.map((e=>({id:e})));return Q?_?(0,c.jsxs)(n.rj,{gutter:0,children:[(0,c.jsx)(n.Od,{parts:["header"],className:"pt-10"}),(0,c.jsx)(n.Zb,{page:!0,children:(0,c.jsx)(n.Od,{parts:["cardHeaderAction","divider","block"]})}),(0,c.jsx)(n.Zb,{className:"mt-20",page:!0,children:(0,c.jsx)(n.Od,{parts:["filterTable-2"]})})]}):(0,c.jsxs)(n.rj,{gutter:0,children:[(0,c.jsx)(n.X2,{children:(0,c.jsx)(n.sg,{children:(0,c.jsxs)(n.Zb,{className:"menu-content",page:!0,header:(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(n.ZT,{h2:!0,children:s("batch_edit_menus")})}),children:[(0,c.jsx)("div",{className:"menu-toolbar mb-10",children:(0,c.jsxs)("div",{className:"menu-toolbar-actions ui-flex start v-center",children:[(0,c.jsx)(n.x$,{columns:d,onChange:e=>{b(e),o.push(`?${e}`)},filtersString:g}),(0,c.jsx)(n.Vr,{value:v,placeholder:s("search"),onChange:e=>y(e.target.value)})]})}),(0,c.jsxs)(n.iA,{children:[(0,c.jsx)(n.ss,{children:(0,c.jsxs)(n.SC,{children:[(0,c.jsx)(n.pj,{as:"th",style:{width:50}}),(0,c.jsx)(n.pj,{as:"th",children:s("menu")})]})}),(0,c.jsx)(n.RM,{children:null==u?void 0:u.map((e=>(0,c.jsxs)(n.SC,{children:[(0,c.jsx)(n.pj,{children:(0,c.jsx)(n.XZ,{onChange:()=>{(e=>{if(e)j.includes(e)?p((j||[]).filter((s=>s!==e))):p([...j,e])})(e.id)},checked:j.includes(e.id||"")},e.id)}),(0,c.jsx)(n.pj,{children:null==e?void 0:e.name})]},e.id)))})]}),(!u||(null==u?void 0:u.length)<1)&&!_&&(0,c.jsx)("div",{children:(0,c.jsx)(h,{})})]})})}),(0,c.jsx)(n.X2,{children:(0,c.jsx)(n.sg,{children:(0,c.jsx)(n.Zb,{className:"menu-content",page:!0,header:(0,c.jsx)(n.ZT,{h2:!0,children:s("items")}),children:(0,c.jsxs)(n.X2,{cols:1,children:[(0,c.jsxs)(n.sg,{children:[(Object.keys(I.categories)||[]).map((e=>(0,c.jsx)(Fe,{className:"menu-category-collapsible",categoryId:e,menuState:I,updateItems:F,removeItem:T,addItem:W,reorderSubcategory:L,itemEdit:!1},e))),w&&(0,c.jsx)("div",{className:"mt-20",children:(0,c.jsx)(n.Bc,{error:w})}),(0,c.jsx)(n.iz,{vertical:30})]}),(0,c.jsx)(n.sg,{className:"mt-0",children:(0,c.jsxs)("div",{className:"ui-flex end",children:[(0,c.jsx)(n.zx,{variant:"ghost",onClick:()=>{o.push("/menu/list")},children:s("cancel")}),(0,c.jsx)(n.zx,{variant:"primary",className:"ml-10",onClick:async()=>{try{E(!0);const e=We(I);if(0===j.length)throw new Error("Please add at least one menu");if(0===Object.keys(e.subcategories).length)throw new Error("Please add at least one item of a subcategory");const s=Object.assign({},e,{menus:O(j)});await t.post("/batch-edit",s),o.push("/menu/list")}catch(w){S(w.message)}finally{E(!1)}},children:s("save")})]})})]})})})})]}):((0,n.hi)("You have no permissions to batch edit menus.",{type:"warning"}),(0,c.jsx)(a.l_,{to:"/menu/list"}))},Xe=()=>{var e;const{can:s}=(0,i.useContext)(n.Il),{t}=(0,n.$G)(),r=(0,n.h_)(l.pH.MENU),d=(0,a.k6)(),[o,u]=(0,i.useState)(""),[m,h]=(0,i.useState)(!1),{register:x,handleSubmit:j,formState:{errors:b},control:v,watch:y}=(0,p.cI)({resolver:(0,g.X)(l.Y6)}),{fields:_,append:N,remove:f}=(0,p.Dq)({control:v,name:"options"}),C=s(l.g3.MENU.CAN_CREATE_MODIFIER),[Z,E]=(0,i.useState)(!1),[w,S]=(0,i.useState)(!1);return(0,i.useEffect)((()=>{const e=y(((e,{name:s})=>{s&&S(!0)}));return()=>e.unsubscribe()}),[y]),C?(0,c.jsx)(n.rj,{gutter:0,children:(0,c.jsx)(n.X2,{children:(0,c.jsx)(n.sg,{children:(0,c.jsx)(n.Zb,{className:"menu-content",page:!0,header:(0,c.jsx)(n.ZT,{h2:!0,children:t("create_modifier")}),children:(0,c.jsxs)(n.X2,{children:[(0,c.jsx)(n.sg,{offset:3,size:6,children:(0,c.jsxs)("form",{onSubmit:j((async e=>{u("");try{h(!0);await r.post("/modifiers",e);d.push("/menu/modifier/list")}catch(o){u(o.message)}finally{h(!1)}})),children:[(0,c.jsx)(n.NI,{label:t("modifier_name"),children:(0,c.jsx)(n.II,Object.assign({"data-testid":"input-modifier-name",placeholder:t("enter_modifier_name")},x("name"),{error:null==(e=b.name)?void 0:e.message}))}),(0,c.jsx)(n.NI,{className:"my-10",children:(0,c.jsx)(n.XZ,Object.assign({"data-testid":"checkbox-modifier-multiselect"},x("multiselect"),{label:t("multiselect")}))}),_.map(((e,s)=>{var i,a,l,r,d,o;return(0,c.jsxs)("div",{className:"mb-20",children:[(0,c.jsxs)("div",{className:"mb-10 ui-flex v-center between",children:[(0,c.jsxs)(n.ZT,{children:[t("option")," ",s+1]}),(0,c.jsx)(n.zx,{variant:"danger-ghost",size:"small",onClick:()=>f(s),iconOnly:!0,children:(0,c.jsx)(n.JO,{type:"Delete",size:18})})]}),(0,c.jsxs)(n.cw,{children:[(0,c.jsx)(n.NI,{label:t("name"),children:(0,c.jsx)(n.II,Object.assign({"data-testid":"modifier-option-name",placeholder:t("enter_option_name")},x(`options.${s}.name`),{error:null==(i=b.options)||null==(a=i[s])||null==(l=a.name)?void 0:l.message}))}),(0,c.jsx)(n.NI,{label:t("price"),children:(0,c.jsx)(n.II,Object.assign({"data-testid":"modifier-option-price",placeholder:t("enter_option_price"),step:".01"},x(`options.${s}.price`),{error:null==(r=b.options)||null==(d=r[s])||null==(o=d.price)?void 0:o.message}))})]},e.id)]},s)})),(0,c.jsx)(n.zx,{"data-testid":"add-option-btn",size:"small",variant:"ghost",onClick:()=>N({name:"",price:void 0}),leftIcon:(0,c.jsx)(n.JO,{type:"Plus",size:14}),children:t("add_option")}),o&&(0,c.jsx)("div",{className:"mt-20",children:(0,c.jsx)(n.Bc,{error:o})}),(0,c.jsx)(n.iz,{vertical:30}),(0,c.jsx)(n.X2,{children:(0,c.jsxs)("div",{className:"form-bottom-action",children:[(0,c.jsx)(n.zx,{onClick:()=>{var e;e="/menu/modifier/list",w?E(!0):d.push(e)},type:"button",variant:"ghost",children:t("cancel")}),(0,c.jsx)(n.zx,{"data-testid":"modifier-create-btn",type:"submit",variant:"primary",disabled:m||!_.length,children:t("create_modifier")})]})})]})}),(0,c.jsx)(n.RZ,{modal:Z,setModal:E,onLeave:()=>d.push("/menu/modifier/list")})]})})})})}):((0,n.hi)("You have no permissions to create modifier",{type:"warning"}),(0,c.jsx)(a.l_,{to:"/menu/modifier/list"}))},ke=()=>{var e,s,t,r,d;const{can:o}=(0,i.useContext)(n.Il),{t:u}=(0,n.$G)(),m=(0,n.h_)(l.pH.MENU),h=(0,y.k6)(),x=(0,y.UO)(),[j,p]=(0,i.useState)(),[g,b]=(0,i.useState)(!0),v=o(l.g3.MENU.CAN_GET_MODIFIER),_=o(l.g3.MENU.CAN_PATCH_MODIFIER);return(0,i.useEffect)((()=>{(async()=>{const e=await m.get(`/modifiers/${x.id}`);p(e.data),b(!1)})()}),[x.id]),v?g?(0,c.jsx)(n.rj,{gutter:0,children:(0,c.jsx)(n.Zb,{page:!0,children:(0,c.jsx)(n.Od,{parts:["cardHeaderAction","divider","text","text","text"]})})}):(0,c.jsx)(n.rj,{gutter:0,children:(0,c.jsx)(n.X2,{children:(0,c.jsx)(n.sg,{children:(0,c.jsx)(n.Zb,{className:"menu-content",page:!0,header:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.ZT,{h2:!0,children:null==j||null==(e=j.result)?void 0:e.name}),_&&(0,c.jsx)(n.rU,{component:n.Xd,onClick:()=>{var e;return h.push(`/menu/modifier/manage/${null==j||null==(e=j.result)?void 0:e.id}`)},children:u("edit")})]}),children:(0,c.jsxs)(n.X2,{cols:1,children:[(0,c.jsxs)(n.sg,{className:"mt-10",children:[(0,c.jsx)(n.ZT,{className:"mb-5",size:"small",p:!0,muted:!0,children:u("name")}),(0,c.jsx)(n.ZT,{children:null==j||null==(s=j.result)?void 0:s.name})]}),(0,c.jsxs)(n.sg,{children:[(0,c.jsx)(n.ZT,{className:"mb-5",size:"small",p:!0,muted:!0,children:u("multiselect")}),(0,c.jsx)(n.ZT,{children:null!=j&&null!=(t=j.result)&&t.multiselect?"Yes":"No"})]}),(0,c.jsxs)(n.sg,{children:[(0,c.jsx)(n.ZT,{className:"mb-5",size:"small",p:!0,muted:!0,children:u("options")}),null==j||null==(r=j.result)||null==(d=r.options)?void 0:d.map(((e,s)=>(0,c.jsxs)("div",{className:"mt-5",children:[(0,c.jsxs)(n.ZT,{children:[e.name,", "]}),(0,c.jsxs)(n.ZT,{children:["$",e.price]})," ",(0,c.jsx)("br",{})]},`${e.name}-${s}`)))]})]})})})})}):((0,n.hi)("You have no permissions to view modifier",{type:"warning"}),(0,c.jsx)(a.l_,{to:"/menu/subcategory/list"}))},ze=()=>{var e,s;const{can:t}=(0,i.useContext)(n.Il),{t:r}=(0,n.$G)(),d=(0,n.h_)(l.pH.MENU),o=(0,y.k6)(),u=(0,y.UO)(),[m,h]=(0,i.useState)(""),[x,j]=(0,i.useState)(!1),[b,v]=(0,i.useState)(!0),[_,N]=(0,i.useState)(),[f,C]=(0,i.useState)(!1),[Z,E]=(0,i.useState)(!1),{register:w,handleSubmit:S,watch:I,formState:{errors:U},control:Q,reset:F}=(0,p.cI)({resolver:(0,g.X)(l.Ss)}),{fields:T,append:W,remove:L}=(0,p.Dq)({control:Q,name:"options"}),O=t(l.g3.MENU.CAN_PATCH_MODIFIER);(0,i.useEffect)((()=>{const e=I(((e,{name:s})=>{s&&E(!0)}));return()=>e.unsubscribe()}),[I]),(0,i.useEffect)((()=>{(async()=>{const e=await d.get(`/modifiers/${u.id}`);N(e.data),e.data&&F(e.data.result),v(!1)})()}),[u.id]);return O?b?(0,c.jsx)(n.rj,{gutter:0,children:(0,c.jsx)(n.Zb,{page:!0,children:(0,c.jsx)(n.Od,{parts:["cardHeaderAction","divider","labelField","labelField","labelField"]})})}):(0,c.jsx)(n.rj,{gutter:0,children:(0,c.jsx)(n.X2,{children:(0,c.jsx)(n.sg,{children:(0,c.jsx)(n.Zb,{className:"menu-content",page:!0,header:(0,c.jsx)(n.ZT,{h2:!0,children:null==_||null==(e=_.result)?void 0:e.name}),children:(0,c.jsxs)(n.X2,{children:[(0,c.jsx)(n.sg,{offset:3,size:6,children:(0,c.jsxs)("form",{onSubmit:S((async e=>{h("");try{j(!0),await d.patch(`/modifiers/${e.id}`,e),o.push("/menu/modifier/list")}catch(m){h(m.message)}finally{j(!1)}})),children:[(0,c.jsx)(n.NI,{label:r("modifier_name"),children:(0,c.jsx)(n.II,Object.assign({"data-testid":"input-modifier-name",placeholder:r("enter_modifier_name")},w("name"),{error:null==(s=U.name)?void 0:s.message}))}),(0,c.jsx)(n.NI,{className:"my-10",children:(0,c.jsx)(n.XZ,Object.assign({"data-testid":"checkbox-modifier-multiselect"},w("multiselect"),{label:r("multiselect")}))}),T.map(((e,s)=>{var t,i,a,l,d,o;return(0,c.jsxs)("div",{className:"mb-20",children:[(0,c.jsxs)("div",{className:"mb-10 ui-flex v-center between",children:[(0,c.jsxs)(n.ZT,{children:[r("option")," ",s+1]}),(0,c.jsx)(n.zx,{variant:"danger-ghost",size:"small",onClick:()=>L(s),iconOnly:!0,children:(0,c.jsx)(n.JO,{type:"Delete",size:18})})]}),(0,c.jsxs)(n.cw,{children:[(0,c.jsx)(n.NI,{label:r("name"),children:(0,c.jsx)(n.II,Object.assign({"data-testid":"modifier-option-name",placeholder:r("enter_option_name")},w(`options.${s}.name`),{error:null==(t=U.options)||null==(i=t[s])||null==(a=i.name)?void 0:a.message}))}),(0,c.jsx)(n.NI,{label:r("price"),children:(0,c.jsx)(n.II,Object.assign({"data-testid":"modifier-option-price",placeholder:r("enter_option_price"),step:".01"},w(`options.${s}.price`),{error:null==(l=U.options)||null==(d=l[s])||null==(o=d.price)?void 0:o.message}))})]},e.id)]},s)})),(0,c.jsx)(n.zx,{size:"small",variant:"ghost",onClick:()=>W({name:"",price:void 0}),leftIcon:(0,c.jsx)(n.JO,{type:"Plus",size:14}),children:r("add_option")}),m&&(0,c.jsx)("div",{className:"mt-20",children:(0,c.jsx)(n.Bc,{error:m})}),(0,c.jsx)(n.iz,{vertical:30}),(0,c.jsx)(n.X2,{children:(0,c.jsxs)("div",{className:"form-bottom-action",children:[(0,c.jsx)(n.zx,{onClick:()=>{var e;e="/menu/modifier/list",Z?C(!0):o.push(e)},type:"button",variant:"ghost",children:r("cancel")}),(0,c.jsx)(n.zx,{"data-testid":"modifier-create-btn",type:"submit",variant:"primary",disabled:x,children:r("edit_modifier")})]})})]})}),(0,c.jsx)(n.RZ,{modal:f,setModal:C,onLeave:()=>o.push("/menu/modifier/list")})]})})})})}):((0,n.hi)("You have no permissions to update modifier",{type:"warning"}),(0,c.jsx)(a.l_,{to:"/menu/modifier/list"}))},Be=e=>{var s,t,r,d,o,u;const{t:m}=(0,n.$G)(),h=(0,n.h_)(l.pH.MENU),x=(0,a.k6)(),j=(0,y.UO)(),[p,g]=(0,i.useState)(!1);return(0,c.jsxs)(n.u_,{visible:!0,onClose:e.onClose,style:{minWidth:360,maxWidth:580},children:[(0,c.jsx)(n.ZT,{h2:!0,children:m("override_confirmation")}),(0,c.jsx)(n.iz,{vertical:30}),(0,c.jsx)(n.ZT,{p:!0,muted:!0,children:m("menu_hotel_override_warning",{menu_name:j.name})}),(0,c.jsx)(n.iz,{vertical:30}),(0,c.jsx)(n.ZT,{h2:!0,children:m("hotels_with_menu")}),(0,c.jsx)(n.ZT,{p:!0,muted:!0,className:"mt-10",children:m("select_to_remove_from_list")}),(0,c.jsxs)("div",{className:"ui-flex column start mt-30",style:{overflowY:"auto",maxHeight:300},children:[null==e||null==(s=e.meta)||null==(t=s.newAssign)?void 0:t.map((e=>(0,c.jsxs)("div",{className:"ui-flex v-center mt-10",children:[(0,c.jsx)(n.ZT,{span:!0,children:e.hotel_name}),(0,c.jsx)(n.rU,{variant:"primary",component:"button",onClick:()=>null,className:"ml-10",children:j.name})]},e.id))),null==e||null==(r=e.meta)||null==(d=r.overrideMenuHotel)?void 0:d.map((e=>(0,c.jsxs)("div",{className:"ui-flex v-center mt-10",children:[(0,c.jsx)(n.ZT,{span:!0,children:e.hotel_name}),(0,c.jsx)(n.rU,{variant:"primary",component:"button",onClick:()=>null,className:"ml-10",children:(0,c.jsx)("s",{children:null==e?void 0:e.menu_name})}),(0,c.jsx)(n.rU,{variant:"primary",component:"button",onClick:()=>null,className:"ml-10",children:j.name})]},e.id))),null==e||null==(o=e.meta)||null==(u=o.removeMenuHotel)?void 0:u.map((e=>(0,c.jsxs)("div",{className:"ui-flex v-center mt-10",children:[(0,c.jsx)(n.ZT,{span:!0,children:e.hotel_name}),(0,c.jsx)(n.rU,{variant:"primary",component:"button",onClick:()=>null,className:"ml-10",children:(0,c.jsx)("s",{children:null==e?void 0:e.menu_name})}),(0,c.jsx)(n.rU,{variant:"danger",component:"button",onClick:()=>null,className:"ml-10",children:m("no_menu_assigned")})]},e.id)))]}),(0,c.jsx)(n.iz,{vertical:30}),(0,c.jsxs)("div",{className:"ui-flex end mt-30",children:[(0,c.jsx)(n.zx,{size:"large",variant:"ghost",onClick:e.onClose,children:m("cancel")}),(0,c.jsx)(n.zx,{disabled:p,size:"large",variant:"primary",className:"ml-20",onClick:async()=>{var s,t;return g(!0),await h.post(`/hotel/${j.id}`,{hotel_ids:null==e||null==(s=e.meta)||null==(t=s.hotels)?void 0:t.map((e=>e.hotel_id))}),x.push(`/menu/view/${j.id}`),e.onClose()},children:m("confirm")})]})]})},De=(e,s)=>{if(e===s)return!0;if(null==e||null==s)return!1;if(e.length!==s.length)return!1;for(let t=0;t<e.length;++t)if(e[t]!==s[t])return!1;return!0},Ae=()=>{const{can:e}=(0,i.useContext)(n.Il),{t:s}=(0,n.$G)(),t=(0,n.h_)(l.pH.NETWORK),r=(0,n.h_)(l.pH.MENU),d=e(l.g3.MENU.CAN_ASSIGN_MENU),o=e(l.g3.NETWORK.CAN_GET_HOTELS),u=[{name:"menu",queryParamName:"menu_ids",data:async()=>{var e,s;const t=await r.get(""),i=[];return null==t||null==(e=t.data)||null==(s=e.result)||s.forEach((e=>{i.push({label:e.name,queryParamValue:e.id||""})})),i}}],x=(0,y.k6)(),j=(0,y.UO)(),[p,g]=(0,i.useState)(),[b,v]=(0,i.useState)(),[_,N]=(0,i.useState)(""),[f,C]=(0,i.useState)(""),E=m(f),[w,S]=(0,i.useState)([]),[I,U]=(0,i.useState)([]),[Q,F]=(0,i.useState)(!0),[T,W]=(0,i.useState)(!1);(0,i.useEffect)((()=>{N(x.location.search)}),[]),(0,i.useEffect)((()=>{(async()=>{var e;const s=Z().parse(x.location.search.replace("?","").replace(/\|([^&]*)&?/g,"&"));let i=decodeURIComponent(Z().stringify(s)).replace(/\|([^&]*)&?/g,"&");const a=await t.get(E?`/hotels?name=${E}&${i}`:`/hotels${i?"/?":""}${i}`);if(null!=a&&null!=(e=a.data)&&e.result){var n;const e=((null==a||null==(n=a.data)?void 0:n.result)||[]).map((e=>{var s,t;return{menu_id:null!=e&&null!=(s=e.menu)&&s.id?e.menu.id:void 0,menu_name:null!=e&&null!=(t=e.menu)&&t.name?e.menu.name:void 0,hotel_id:e.id,hotel_name:e.name,hub:e.hub,city:e.city}}));g(e),F(!1)}})()}),[_,E]),(0,i.useEffect)((()=>{(async()=>{var e;const s=await r.get(`/hotel/${j.id}`);if(null!=s&&null!=(e=s.data)&&e.result){var t;const e=((null==s||null==(t=s.data)?void 0:t.result)||[]).map((e=>e.hotel_id));S(e),U(e)}})()}),[]);return d&&o?Q?(0,c.jsxs)(n.rj,{gutter:0,children:[(0,c.jsx)(n.Od,{parts:["header"],className:"pt-10"}),(0,c.jsx)(n.Zb,{page:!0,children:(0,c.jsx)(n.Od,{parts:["cardHeaderAction","divider","block"]})}),(0,c.jsx)(n.Zb,{className:"mt-20",page:!0,children:(0,c.jsx)(n.Od,{parts:["filterTable-2"]})})]}):(0,c.jsx)(n.rj,{gutter:0,children:(0,c.jsxs)(n.X2,{children:[(0,c.jsx)(n.sg,{children:(0,c.jsxs)(n.Zb,{className:"menu-content",page:!0,header:(0,c.jsx)(n.ZT,{h2:!0,children:s("assign_menu_to_hotel",{menu_name:j.name})}),children:[(0,c.jsx)("div",{className:"menu-toolbar",children:(0,c.jsxs)("div",{className:"menu-toolbar-actions ui-flex start v-center",children:[(0,c.jsx)(n.x$,{columns:u,onChange:e=>{N(e),x.push(`?${e}`)},filtersString:_}),(0,c.jsx)(n.Vr,{value:f,placeholder:s("search"),onChange:e=>C(e.target.value)})]})}),(0,c.jsxs)(n.iA,{children:[(0,c.jsx)(n.ss,{children:(0,c.jsxs)(n.SC,{children:[(0,c.jsx)(n.pj,{as:"th",style:{width:50}}),(0,c.jsx)(n.pj,{as:"th",children:s("name")}),(0,c.jsx)(n.pj,{as:"th",children:s("menu")})]})}),(0,c.jsx)(n.RM,{children:null==p?void 0:p.map((e=>(0,c.jsxs)(n.SC,{children:[(0,c.jsx)(n.pj,{children:(0,c.jsx)(n.XZ,{onChange:()=>{(e=>{if(e)w.includes(e)?S((w||[]).filter((s=>s!==e))):S([...w,e])})(e.hotel_id)},checked:w.includes(e.hotel_id)},e.id)}),(0,c.jsx)(n.pj,{children:null==e?void 0:e.hotel_name}),(0,c.jsx)(n.pj,{children:null==e?void 0:e.menu_name})]},e.id)))})]}),(!p||(null==p?void 0:p.length)<1)&&!Q&&(0,c.jsx)("div",{children:(0,c.jsx)(h,{})}),(0,c.jsx)(n.X2,{className:"mt-30",children:(0,c.jsxs)("div",{className:"form-bottom-action",children:[(0,c.jsx)(n.zx,{variant:"ghost",onClick:()=>{var e;e=`/menu/view/${j.id}`,De(I,w)?x.push(e):W(!0)},children:s("cancel")}),(0,c.jsx)(n.zx,{variant:"primary",onClick:()=>{const e=[],s=[],t=[],i=[];let a=[];null==p||p.filter((e=>w.includes(e.hotel_id))).forEach((i=>{e.push(i),i.menu_id?i.menu_id!==j.id&&t.push(i):s.push(i)})),a=I.filter((e=>!w.includes(e))),null==p||p.filter((e=>a.includes(e.hotel_id))).forEach((e=>{i.push(e)})),v({resource:"hotels",newAssign:s,overrideMenuHotel:t,removeMenuHotel:i,hotels:e})},disabled:De(I,w),children:s("save")})]})})]})}),(0,c.jsx)(n.RZ,{modal:T,setModal:W,onLeave:()=>x.push("/menu/subcategory/list")}),b&&(0,c.jsx)(Be,{meta:b,onClose:()=>v(void 0)})]})}):((0,n.hi)("You have no permissions to assign hotels menu",{type:"warning"}),(0,c.jsx)(a.l_,{to:`/menu/view/${j.id}`}))},Re=e=>{const{t:s}=(0,n.$G)(),t=(0,n.h_)(l.pH.MENU),[a,r]=(0,i.useState)(!1);return(0,c.jsxs)(n.u_,{visible:!0,onClose:e.onClose,style:{minWidth:360},children:[(0,c.jsx)("h3",{children:s("delete_menu")}),(0,c.jsx)(n.iz,{}),(0,c.jsx)("span",{children:s("delete_menu_confirm")}),(0,c.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:30},children:[(0,c.jsx)(n.zx,{size:"large",variant:"ghost",onClick:e.onClose,children:s("cancel")}),(0,c.jsx)(n.zx,{disabled:a,size:"large",variant:"danger",style:{marginLeft:20},onClick:()=>{(async()=>{r(!0);if(await t.delete(`/${e.meta.id}`))e.reloadData(e.meta.id),e.onClose()})()},children:s("delete")})]})]})},Ve=()=>{var e;const{can:s}=(0,i.useContext)(n.Il),{t}=(0,n.$G)(),r=(0,n.h_)(l.pH.MENU),d=(0,n.h_)(l.pH.NETWORK),o=[{name:"hotel",queryParamName:"hotelIds",data:async()=>{var e,s;const t=await d.get("/hotels"),i=[];return null==t||null==(e=t.data)||null==(s=e.result)||s.forEach((e=>{i.push({label:e.name,queryParamValue:e.id||""})})),i}}],u=(0,a.k6)(),[j,p]=(0,i.useState)(),[g,b]=(0,i.useState)(),[v,y]=(0,i.useState)(""),[_,N]=(0,i.useState)(""),[f,C]=(0,i.useState)(!0),E=m(_),w=s(l.g3.MENU.CAN_GET_MENUS),S=s(l.g3.MENU.CAN_CREATE_MENU),I=s(l.g3.MENU.CAN_UPDATE_MENU),U=s(l.g3.MENU.CAN_DELETE_MENU),Q=s(l.g3.MENU.CAN_GET_SINGLE_MENU),F=s(l.g3.MENU.CAN_DUPLICATE_MENU);(0,i.useEffect)((()=>{w&&y(u.location.search)}),[]),(0,i.useEffect)((()=>{w&&(async()=>{const e=Z().parse(u.location.search.replace("?","").replace(/\|([^&]*)&?/g,"&"));let s=decodeURIComponent(Z().stringify(e)).replace(/\|([^&]*)&?/g,"&");const t=await r.get(E?`?name=${E}&${s}`:`${s?"/?":""}${s}`);p(t.data.result),C(!1)})()}),[v,E]);return w?f?(0,c.jsx)(n.rj,{gutter:0,children:(0,c.jsx)(n.Zb,{page:!0,children:(0,c.jsx)(n.Od,{parts:["cardHeaderAction","divider","filterTable-2"]})})}):(0,c.jsx)(n.rj,{gutter:0,children:(0,c.jsxs)(n.X2,{children:[(0,c.jsx)(n.sg,{children:(0,c.jsxs)(n.Zb,{className:"menu-content",page:!0,header:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.ZT,{h2:!0,children:t("menu_list")}),(0,c.jsxs)("div",{className:"ui-flex v-center",children:[I&&(0,c.jsx)(n.zx,{variant:"ghost",onClick:()=>u.push("/menu/batch-edit"),className:"mr-10",children:t("batch_edit")}),S&&(0,c.jsx)(n.zx,{onClick:()=>u.push("/menu/editor"),children:t("create_new")})]})]}),children:[(0,c.jsx)("div",{className:"menu-toolbar",children:(0,c.jsxs)("div",{className:"menu-toolbar-actions ui-flex start v-center",children:[(0,c.jsx)(n.x$,{columns:o,onChange:e=>{y(e),u.push(`?${e}`)},filtersString:v}),(0,c.jsx)(n.Vr,{value:_,placeholder:t("search"),onChange:e=>N(e.target.value)})]})}),(0,c.jsxs)(n.iA,{children:[(0,c.jsx)(n.ss,{children:(0,c.jsxs)(n.SC,{children:[(0,c.jsx)(n.pj,{as:"th",children:t("name")}),(0,c.jsx)(n.pj,{as:"th",children:t("date_created")}),(0,c.jsx)(n.pj,{as:"th",children:t("status")}),(0,c.jsx)(n.pj,{as:"th",children:t("assigned_hotels")}),(0,c.jsx)(n.pj,{as:"th",children:t("last_published")}),(0,c.jsx)(n.pj,{as:"th",style:{width:50}})]})}),(0,c.jsx)(n.RM,{children:null==(e=j||[])?void 0:e.map((e=>(0,c.jsxs)(n.SC,{children:[(0,c.jsx)(n.pj,{children:Q?(0,c.jsx)(n.rU,{size:"medium",component:a.rU,to:`/menu/view/${e.id}`,children:e.name}):e.name}),(0,c.jsx)(n.pj,{children:e.created_at&&(0,k.lm)(e.created_at)}),(0,c.jsx)(n.pj,{children:(0,c.jsx)(n.Ct,{leftIcon:"Circle",iconSize:5,size:"small",className:B()({"menu-inactive-badge":"ACTIVE"!==e.status}),children:"ACTIVE"===e.status?t("active"):t("inactive")})}),(0,c.jsx)(n.pj,{children:e.assignedHotels}),(0,c.jsx)(n.pj,{children:e.published_at?(0,k.lm)(e.published_at,!0):"-"}),(0,c.jsx)(n.pj,{children:(U||F)&&(0,c.jsx)(n.Lt,{renderTrigger:(e,s)=>(0,c.jsx)(n.Kk,{onClick:e,ref:s,children:(0,c.jsx)(n.JO,{type:"MoreHorizontal01",size:18})}),hasArrow:!0,placement:"right",children:(0,c.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:160},children:[F&&(0,c.jsx)(n.zx,{className:"w-100",variant:"ghost",muted:!0,onClick:()=>(async e=>{try{const s=await r.post(`/duplicate/${e}`);u.push(`/menu/manage/${s.data.result.id}`)}catch(s){console.log(s)}})(e.id||""),children:t("duplicate")}),U&&(0,c.jsx)(n.zx,{className:"w-100",variant:"danger-ghost",muted:!0,onClick:()=>{e.id&&b({resource:"menu",id:e.id})},children:t("delete")})]})})})]},e.id)))})]}),(!j||(null==j?void 0:j.length)<1)&&!f&&(0,c.jsx)("div",{children:(0,c.jsx)(h,{})})]})}),U&&g&&(0,c.jsx)(Re,{reloadData:e=>(e=>{e&&p(null==j?void 0:j.filter((s=>s.id!==e)))})(e),meta:g,onClose:()=>b(void 0)})]})}):(0,c.jsx)(x,{entity:"Menus"})},$e=()=>{const{can:e}=(0,i.useContext)(n.Il),{t:s}=(0,n.$G)(),t=(0,n.h_)(l.pH.MENU),r=(0,a.k6)(),[d,o]=(0,i.useState)(""),[u,m]=(0,i.useState)(!1),[h,x]=(0,i.useState)(""),[j,p]=(0,i.useState)(!1),[g,b]=(0,i.useReducer)(Te,{addedItems:{},itemsToSelect:{},categories:{},loading:!0,error:null}),v=e(l.g3.MENU.CAN_CREATE_MENU);(0,i.useEffect)((()=>{(async()=>{try{const e=await t.get("/items/category-subcategories/subcategories");b({type:"set-menu",payload:{addedItems:{},categories:e.data.result,loading:!1}})}catch(d){b({type:"set-menu",payload:{error:d.message,loading:!1}})}})()}),[]);const y=e=>{b({type:"add-update-item",payload:e})},_=e=>{b({type:"remove-item",payload:e})},N=e=>{b({type:"add-item",payload:e})},f=e=>{b({type:"reorder-subcategory",payload:e})};return v?g.loading?(0,c.jsx)(n.rj,{gutter:0,children:(0,c.jsx)(n.Zb,{children:(0,c.jsx)(n.Od,{parts:["cardHeaderAction","divider","field","block"]})})}):(0,c.jsx)(n.rj,{gutter:0,children:(0,c.jsx)(n.X2,{children:(0,c.jsx)(n.sg,{children:(0,c.jsxs)(n.Zb,{className:"menu-content",page:!0,header:(0,c.jsx)(n.ZT,{h2:!0,children:s("create_new_menu")}),children:[(0,c.jsx)(n.X2,{gutterY:0,children:(0,c.jsx)(n.sg,{size:6,className:"pt-10",children:(0,c.jsxs)("div",{className:"ui-flex v-center",children:[(0,c.jsxs)(n.ZT,{children:[s("menu_name"),"*"]}),(0,c.jsx)(n.II,{className:"ml-10",style:{width:300},placeholder:s("menu_name"),value:h,onChange:e=>x(e.currentTarget.value)})]})})}),(0,c.jsx)(n.X2,{children:(0,c.jsx)(n.sg,{size:6,children:(0,c.jsx)(n.ZT,{h2:!0,className:"my-10",children:s("menu_items")})})}),(0,c.jsxs)(n.X2,{cols:1,children:[(0,c.jsxs)(n.sg,{children:[(Object.keys(g.categories)||[]).map((e=>(0,c.jsx)(Fe,{className:"menu-category-collapsible",categoryId:e,menuState:g,updateItems:y,removeItem:_,addItem:N,reorderSubcategory:f,itemEdit:!0},e))),d&&(0,c.jsx)("div",{className:"mt-20",children:(0,c.jsx)(n.Bc,{error:d})}),(0,c.jsx)(n.iz,{vertical:30})]}),(0,c.jsx)(n.sg,{className:"mt-0",children:(0,c.jsxs)("div",{className:"ui-flex end",children:[(0,c.jsx)(n.zx,{variant:"ghost",onClick:()=>{return e="/menu/list",void(h?p(!0):r.push(e));var e},children:s("cancel")}),(0,c.jsx)(n.zx,{variant:"primary",className:"ml-10",disabled:u,onClick:async()=>{try{const e=We(g);if(""===h)throw new Error(s("enter_menu_name"));if(0===Object.keys(e.subcategories).length)throw new Error(s("add_item_of_subcagegory_error"));m(!0),await t.post("",Object.assign({name:h},e)),r.push("/menu/list")}catch(d){o(d.message)}finally{m(!1)}},children:s("create")})]})}),(0,c.jsx)(n.RZ,{modal:j,setModal:p,onLeave:()=>r.push("/menu/list")})]})]})})})}):((0,n.hi)("You have no permissions to create menu.",{type:"warning"}),(0,c.jsx)(a.l_,{to:"/menu/list"}))};var He;!function(e){e.ADD="ADD",e.SUBTRACT="SUBTRACT",e.MULTIPLY="MULTIPLY"}(He||(He={}));const Ye=({menuState:e,closeModal:s})=>{var t;const{t:a}=(0,n.$G)(),[l,r]=(0,i.useState)([]),[d,o]=(0,i.useState)([]),[u,m]=(0,i.useState)(""),[h,x]=(0,i.useState)(!1),[j,g]=(0,i.useState)([]),{register:b,handleSubmit:v,setValue:y,watch:_}=(0,p.cI)({defaultValues:{}});(0,i.useEffect)((()=>{(()=>{const s=[],t=[];e.addedItems&&(Object.keys(e.addedItems).forEach((i=>{const a=e.addedItems[i];t.push({id:i,name:a.name}),Object.keys(a.subcategories).forEach((e=>{const t=a.subcategories[e];Object.keys(t.items).forEach((a=>{s.push({categoryId:i,subcategoryId:e,subcategoryName:t.items[a].subcategory_name||t.name,item:{id:a,name:t.items[a].name,price:t.items[a].price}})}))}))})),r(s),o(s),g(t))})()}),[e.addedItems]);return(0,i.useEffect)((()=>{if(h)if(u){const e=l.filter((e=>e.categoryId===u)).map((e=>JSON.stringify(e)));y("checkedItems",e)}else y("checkedItems",l.map((e=>JSON.stringify(e))));else y("checkedItems",null)}),[h]),(0,i.useEffect)((()=>{if(u){const e=l.filter((e=>e.categoryId===u));o(e)}else o(l)}),[u]),(0,c.jsxs)("div",{className:"menu-price-multiplier",children:[(0,c.jsx)(n.ZT,{h2:!0,children:a("price_multiplier")}),(0,c.jsx)(n.iz,{}),(0,c.jsxs)("form",{onSubmit:v((async t=>{const i=Number(t.price);Array.isArray(t.checkedItems)||(t.checkedItems=[t.checkedItems]),t.checkedItems.forEach((s=>{const a=JSON.parse(s),n=e.addedItems[a.categoryId].subcategories[a.subcategoryId].items[a.item.id];n.price=Number(n.price),n.old_price=Number(n.old_price)||Number(n.price),t.multiplyOption===He.ADD?n.price=n.price?n.price+i:n.old_price+i:t.multiplyOption===He.SUBTRACT?n.old_price&&n.old_price<=n.price-i&&(n.price=n.price-i):t.multiplyOption===He.MULTIPLY&&(n.price=n.price?n.price*i:n.old_price*i),n.old_price===n.price&&delete n.old_price,n.price=n.price.toString(),n.old_price&&(n.old_price=n.old_price.toString())})),s()})),children:[(0,c.jsx)(n.rj,{children:(0,c.jsxs)(n.X2,{children:[(0,c.jsxs)(n.sg,{cols:6,children:[(0,c.jsx)(n.ZT,{className:"mb-10",children:a("menu_items")}),(0,c.jsx)("div",{className:"mt-10 mb-10",children:(0,c.jsxs)(n.Ph,{selectProps:{onChange:e=>{m(e.target.value),x(!1),y("checkedItems",null)}},children:[(0,c.jsx)(n.Wx,{selected:!0,disabled:!0,children:a("filter_by_categories")}),(0,c.jsx)(n.Wx,{value:"",children:a("all")}),(e=>{if(e.length)return(e||[]).map((e=>(0,c.jsx)(n.Wx,{value:e.id,children:e.name},e.id)))})(j||[])]})}),(0,c.jsxs)("div",{className:"checkboxes",children:[(0,c.jsx)(n.XZ,{onChange:e=>{x(e.target.checked)},checked:h,value:"all",className:"my-5 w-100 my-20",label:a("select_all_items")},"all"),(d.length?d:l).map(((e,s)=>(0,i.createElement)(n.XZ,Object.assign({},b("checkedItems"),{key:s+""+e.item.id,value:JSON.stringify(e),className:"my-5 w-100",label:e.item.name+" - "+e.subcategoryName}))))]})]}),(0,c.jsxs)(n.sg,{cols:6,children:[(0,c.jsx)(n.ZT,{children:a("adjust_item_prices_by")}),(0,c.jsxs)("div",{className:"ui-flex price-options mt-10",children:[(0,c.jsxs)(n.Ph,{selectProps:Object.assign({},b("multiplyOption")),children:[(0,c.jsx)(n.Wx,{value:"",disabled:!0,hidden:!0,children:a("action")}),(0,c.jsx)(n.Wx,{value:He.ADD,children:a("add")}),(0,c.jsx)(n.Wx,{value:He.SUBTRACT,children:a("subtract")}),(0,c.jsx)(n.Wx,{value:He.MULTIPLY,children:a("multiply")})]}),(0,c.jsx)(n.II,Object.assign({},b("price"),{min:1,className:"ml-10",type:"number",placeholder:a("price")}))]})]})]})}),(0,c.jsx)(n.iz,{vertical:30}),(0,c.jsxs)("div",{className:"ui-flex v-center end",children:[(0,c.jsx)(n.zx,{size:"large",variant:"ghost",onClick:s,children:a("cancel")}),(0,c.jsx)(n.zx,{disabled:!(null!=(t=_("checkedItems"))&&t.length),className:"ml-10",type:"submit",children:a("continue")})]})]})]})},Je=()=>{const{can:e}=(0,i.useContext)(n.Il),{t:s}=(0,n.$G)(),t=(0,n.h_)(l.pH.MENU),{id:r}=(0,y.UO)(),d=(0,y.k6)(),[o,u]=(0,i.useState)(""),[m,h]=(0,i.useState)(!0),[x,j]=(0,i.useState)(!1),[p,g]=(0,i.useState)(""),[b,v]=(0,i.useState)(!1),[_,N]=(0,i.useState)(),[f,C]=(0,i.useReducer)(Te,{addedItems:{},itemsToSelect:{},categories:{},loading:!0,error:null}),Z=e(l.g3.MENU.CAN_UPDATE_MENU);(0,i.useEffect)((()=>{(async()=>{try{const e=await t.get(`/${r}`),s=await t.get("/items/category-subcategories/subcategories"),i=e.data.result.categories,a=s.data.result,n=Object.assign({},i);((e,s)=>{Object.keys(e).forEach((t=>{var i;const a=s[t],n=null==(i=e[t])?void 0:i.subcategories;n&&Object.keys(a.subcategories).forEach((e=>{const i=s[t].subcategories[e];n[e]&&(i.order=n[e].order)}))}))})(n,a),C({type:"set-menu",payload:{menu:n,addedItems:i,categories:a,loading:!1}}),g(e.data.result.name),N(e.data.result.published_at)}catch(o){C({type:"set-menu",payload:{error:o.message,loading:!1}})}})()}),[r]);const E=e=>{C({type:"add-update-item",payload:e})},w=e=>{C({type:"remove-item",payload:e})},S=e=>{C({type:"add-item",payload:e})},I=e=>{C({type:"reorder-subcategory",payload:e})};return Z?f.loading?(0,c.jsx)(n.rj,{gutter:0,children:(0,c.jsx)(n.Zb,{page:!0,children:(0,c.jsx)(n.Od,{parts:["title","divider","field","title","block"]})})}):(0,c.jsx)(n.rj,{gutter:0,children:(0,c.jsxs)(n.X2,{children:[(0,c.jsx)(n.sg,{children:(0,c.jsxs)(n.Zb,{className:"menu-content",page:!0,header:(0,c.jsx)(n.ZT,{h2:!0,children:s("edit_menu")}),children:[(0,c.jsx)(n.X2,{gutterY:0,children:(0,c.jsx)(n.sg,{size:6,className:"pt-10",children:(0,c.jsxs)("div",{className:"ui-flex v-center",children:[(0,c.jsxs)(n.ZT,{children:[s("menu_name"),"*"]}),(0,c.jsx)(n.II,{className:"ml-10",style:{width:300},placeholder:s("menu_name"),value:p,onChange:e=>g(e.currentTarget.value)})]})})}),(0,c.jsxs)(n.X2,{children:[(0,c.jsx)(n.sg,{size:6,children:(0,c.jsx)(n.ZT,{h2:!0,className:"my-10",children:s("menu_items")})}),(0,c.jsx)(n.sg,{size:6,className:"ui-flex end v-center",children:(0,c.jsx)(n.zx,{onClick:()=>h(!1),variant:"ghost",children:s("price_multiplier")})})]}),(0,c.jsxs)(n.X2,{cols:1,children:[(0,c.jsxs)(n.sg,{children:[(Object.keys(f.categories)||[]).map((e=>(0,c.jsx)(Fe,{className:"menu-category-collapsible",categoryId:e,menuState:f,updateItems:E,removeItem:w,addItem:S,reorderSubcategory:I,itemEdit:!0},e))),o&&(0,c.jsx)("div",{className:"mt-20",children:(0,c.jsx)(n.Bc,{error:o})}),(0,c.jsx)(n.iz,{vertical:30})]}),(0,c.jsx)(n.sg,{className:"mt-0",children:(0,c.jsxs)("div",{className:"ui-flex end",children:[(0,c.jsx)(n.zx,{variant:"ghost",onClick:()=>{var e;e="/menu/list",p?v(!0):d.push(e)},children:s("cancel")}),(0,c.jsx)(n.zx,{variant:"primary",disabled:x,className:"ml-10",onClick:async()=>{try{const e=We(f);if(""===p)throw new Error(s("enter_menu_name_error"));if(0===Object.keys(e.subcategories).length)throw new Error(s("add_item_of_subcagegory_error"));j(!0),await t.put(`/${r}`,Object.assign({},e,{name:p,published_at:_})),d.push(`/menu/view/${r}`)}catch(o){u(o.message)}finally{j(!1)}},children:s("save")})]})}),(0,c.jsx)(n.RZ,{modal:b,setModal:v,onLeave:()=>d.push("/menu/list")})]})]})}),!m&&(0,c.jsx)(n.u_,{visible:!0,onClose:()=>h(!0),style:{minWidth:500},children:(0,c.jsx)(Ye,{closeModal:()=>h(!0),menuState:f})})]})}):((0,n.hi)("You have no permissions to edit menu.",{type:"warning"}),(0,c.jsx)(a.l_,{to:"/menu/list"}))},Pe=({className:e,category:s})=>{const{t}=(0,n.$G)(),[a,l]=(0,i.useState)(null),[r,d]=(0,i.useState)([]),o=e=>{const s=e.currentTarget.getAttribute("data-id");s&&l(s)};return(0,i.useEffect)((()=>{const e=Object.keys(s.subcategories).sort(((e,t)=>s.subcategories[e].order-s.subcategories[t].order));d(e),l(e[0])}),[]),(0,c.jsx)(n.zF,{title:s.name,className:e,onToggle:e=>{const t=Object.keys(s.subcategories)[0];l(e?a:t)},open:!0,children:(0,c.jsxs)("div",{className:"ui-flex",children:[(0,c.jsx)("div",{className:"menu-ordered-list ui-border-right p-10",children:r.map((e=>{const t=s.subcategories[e];return(0,c.jsx)(n.Xd,{className:B()("ui-flex w-100 px-20 menu-sub-order-item ui-rounded",{active:a===e}),"data-id":e,onClick:o,children:t.name},e)}))}),(0,c.jsx)("div",{className:"p-20 w-100",children:a&&(0,c.jsx)(n.rj,{gutter:0,children:(0,c.jsx)(n.X2,{colsLg:2,colsXl:3,colsXxl:4,gutter:5,children:(Object.keys(s.subcategories[a].items)||[]).length>0?(Object.keys(s.subcategories[a].items)||[]).map((e=>{var i,l,r;const d=s.subcategories[a].items[e];return(0,c.jsx)(n.sg,{children:(0,c.jsxs)("div",{className:"ui-rounded p-10 ui-flex w-100 ui-border",children:[(0,c.jsx)(n.Ee,{alt:d.name,src:`${null==d?void 0:d.image_base_url}/image/400x400/${d.image}`,width:57,height:57,className:B()("menu-item-card-image ui-rounded mr-10",{"item-86-opacity":d.item86})}),(0,c.jsxs)("div",{className:"menu-item-card-content w-100",children:[(0,c.jsxs)("div",{className:"menu-item-card-header ui-flex between v-start",children:[(0,c.jsx)(n.ZT,{size:"large",muted:d.item86,className:"ui-flex mb-5",children:d.name}),d.item86&&(0,c.jsx)(n.Ct,{size:"small",className:"menu-inactive-badge item86-badge",children:t("item_86")})]}),(0,c.jsxs)("div",{className:"menu-item-card-body",children:[d.old_price&&(0,c.jsxs)(n.ZT,{className:"mt-10 ui-text-line pr-5",muted:!0,children:["$",Number(d.old_price).toFixed(2)]}),(0,c.jsxs)(n.ZT,{muted:d.item86,children:["$",null==(i=Number(d.price))?void 0:i.toFixed(2)]})]}),(0,c.jsx)("div",{className:"menu-item-card-footer ui-flex between w-100 v-end",children:(0,c.jsxs)(n.ZT,{size:"small",muted:d.item86,children:[null!=(l=d.suggested_items)&&l.length?null==(r=d.suggested_items)?void 0:r.length:t("no")," ",t("sugessted_items")]})})]})]})},d.id)})):(0,c.jsx)(n.ZT,{muted:!0,children:t("no_items_added")})})})})]})})},Ke=()=>{var e,s;const{t}=(0,n.$G)(),a=(0,n.h_)(l.pH.MENU),r=(0,y.UO)(),[d,o]=(0,i.useState)(),[u,x]=(0,i.useState)(""),[j,p]=(0,i.useState)(!0),g=m(u);return(0,i.useEffect)((()=>{(async()=>{const e=await a.get(g?`/hotel/${r.id}?name=${g}`:`/hotel/${r.id}`);o(e.data),p(!1)})()}),[]),(0,n.N7)((()=>{(async()=>{const e=await a.get(g?`/hotel/${r.id}?name=${g}`:`/hotel/${r.id}`);o(e.data),p(!1)})()}),[g]),(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{className:"menu-toolbar",children:(0,c.jsx)("div",{className:"menu-toolbar-actions ui-flex start v-center",children:(0,c.jsx)(n.Vr,{value:u,placeholder:t("search"),onChange:e=>x(e.target.value)})})}),(0,c.jsxs)(n.iA,{children:[(0,c.jsx)(n.ss,{children:(0,c.jsxs)(n.SC,{children:[(0,c.jsx)(n.pj,{as:"th",children:t("hotel")}),(0,c.jsx)(n.pj,{as:"th",children:t("menu")})]})}),(0,c.jsx)(n.RM,{children:null==d||null==(e=d.result)?void 0:e.map((e=>(0,c.jsxs)(n.SC,{children:[(0,c.jsx)(n.pj,{children:null==e?void 0:e.hotel_name}),(0,c.jsx)(n.pj,{children:null==e?void 0:e.menu_name})]},e.it)))})]}),(!(null!=d&&d.result)||(null==d||null==(s=d.result)?void 0:s.length)<1)&&!j&&(0,c.jsx)("div",{children:(0,c.jsx)(h,{})})]})},qe=()=>{const{can:e}=(0,i.useContext)(n.Il),{t:s}=(0,n.$G)(),t=(0,n.h_)(l.pH.MENU),{id:r}=(0,y.UO)(),[d,o]=(0,i.useState)(""),[u,m]=(0,i.useState)(),[h,x]=(0,i.useState)(),[j,p]=(0,i.useState)(),g=e(l.g3.MENU.CAN_GET_SINGLE_MENU),b=e(l.g3.MENU.CAN_GET_MENU_HOTELS),v=e(l.g3.MENU.CAN_PUSH_MENU_TO_PRODUCTION),_=e(l.g3.MENU.CAN_UPDATE_MENU),N=e(l.g3.MENU.CAN_ASSIGN_MENU),f=e(l.g3.NETWORK.CAN_GET_HOTELS);(0,i.useEffect)((()=>{g&&(async()=>{var e,s;const i=await t.get(`/${r}`);m(i.data.result),x(null==(e=i.data.result)?void 0:e.hasChanges),p(null==(s=i.data.result)?void 0:s.published)})()}),[]);return g?u?(0,c.jsxs)(n.rj,{gutter:0,children:[(0,c.jsx)(n.X2,{children:(0,c.jsx)(n.sg,{children:(0,c.jsxs)("div",{className:"w-100 ui-flex between v-center pl-30 pr-20 pt-10",children:[(0,c.jsx)(n.ZT,{h2:!0,children:u.name}),v&&(0,c.jsxs)(n.rU,{component:n.Xd,onClick:async()=>{try{var e,s;const i=await t.post(`/push-production/${r}`);x(null==(e=i.data.result)?void 0:e.hasChanges),p(null==(s=i.data.result)?void 0:s.published)}catch(d){o(d.message)}},children:[s("push_to_production"),h?"*":""]})]})})}),(0,c.jsx)(n.X2,{children:(0,c.jsx)(n.sg,{children:(0,c.jsx)(n.Zb,{className:"network-content",page:!0,header:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.ZT,{h2:!0,children:s("menu_items")}),_&&(0,c.jsx)(n.rU,{component:a.rU,to:`/menu/manage/${r}`,children:s("edit")})]}),children:Object.keys((null==u?void 0:u.categories)||[]).map(((e,s)=>{const t=u.categories[e];return(0,c.jsx)(Pe,{category:t,className:"menu-category-collapsible"},e)}))})})}),b&&(0,c.jsx)(n.X2,{children:(0,c.jsx)(n.sg,{children:(0,c.jsx)(n.Zb,{className:"menu-content",page:!0,header:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.ZT,{h2:!0,children:s("hotels_assigned")}),N&&f&&(0,c.jsx)(n.rU,{component:a.rU,to:`/menu/hotels/${u.name}/${u.id}`,disabled:!j,children:s(j?"edit":"menu_not_published")})]}),children:(0,c.jsx)(Ke,{})})})})]}):(0,c.jsxs)(n.rj,{gutter:0,children:[(0,c.jsx)(n.Od,{parts:["header"],className:"pt-10"}),(0,c.jsx)(n.Zb,{page:!0,children:(0,c.jsx)(n.Od,{parts:["cardHeaderAction","divider","block"]})}),(0,c.jsx)(n.Zb,{className:"mt-20",page:!0,children:(0,c.jsx)(n.Od,{parts:["filterTable-2"]})})]}):((0,n.hi)("You have no permissions to view menu",{type:"warning"}),(0,c.jsx)(a.l_,{to:"/menu/list"}))};var es=t("JNdn"),ss=t.n(es),ts={};ts.styleTagTransform=ee(),ts.setAttributes=J(),ts.insert=H().bind(null,"head"),ts.domAPI=V(),ts.insertStyleElement=K();A()(ss(),ts);ss()&&ss().locals&&ss().locals;const is={en:{translation:{menu_list:"Menu List",batch_edit:"Batch Edit",create_new:"Create New",search:"Search...",filter:"Filter",name:"Name",date_created:"Date Created",status:"Status",assigned_hotels:"Assigned Hotels",last_published:"Last Published",active:"Active",inactive:"Inactive",duplicate:"Duplicate",delete:"Delete",batch_edit_menus:"Batch Edit Menus",menu:"Menu",items:"Items",cancel:"Cancel",save:"Save Changes",edit:"Edit",added_items:"Added Items",sugessted_items:"Suggested Items",no:"No",no_items_added:"No items added",add_items:"Add Items",item_name:"Item Name",price:"Price",no_more_items_to_add:"No more items to add",same_price_error:"Cannot set same price!",lower_price_error:"Cannot set lower price!",item_price:"Item Price",no_sugessted_items:"No Suggested Items",enter_menu_name_error:"Please enter menu name",add_item_of_subcagegory_error:"Please add at least one item of a subcategory",create_new_menu:"Create New Menu",menu_name:"Menu Name",menu_items:"Menu Items",create:"Create",hotel:"Hotel",push_to_production:"Push to Production",hotels_assigned:"Hotels Assigned",menu_not_published:"Menu not published",edit_menu:"Edit Menu",price_multiplier:"Price Multiplier",override_confirmation:"Override Confirmation",menu_hotel_override_warning:"The following hotels already have menus assigned to them. Existing menu assignments will be overriden if you adding them to {{menu_name}} Remove them from this list, or confirm to proceed with the menu override. Please note the menus will not be overriden until you have pushed this new menu to production.",hotels_with_menu:"Hotels With Menu",select_to_remove_from_list:"Select to remove them from list.",no_menu_assigned:"No menu assigned",confirm:"Confirm",assign_menu_to_hotel:"Assign {{menu_name}} to Hotel",delete_menu:"Delete Menu?",delete_menu_confirm:"Are you sure you want to delete menu?",filter_by_categories:"Filter By Categories",all:"All",select_all_items:"Select all items",adjust_item_prices_by:"Adjust items price by:",action:"Action",add:"Add",subtract:"Subtract",multiply:"Multiply",continue:"Continue",create_modifier:"Create Modifier",enter_modifier_name:"Enter modifier name",multiselect:"Multiselect",option:"Option",modifier_name:"Modifier Name",enter_option_name:"Enter option name",enter_option_price:"Enter option price",add_option:"Add option",options:"Options",edit_modifier:"Edit Modifier",delete_modifier:"Delete Modifier?",delete_modifier_confirm:"Are you sure you want to delete this modifier?",create_new_category:"Create New Category",category_name:"Category Name",enter_category_name:"Enter category name",start_period:"Start Period",end_period:"End Period",end:"End",create_category:"Create Category",category_list:"Category List",create_new_subcategory:"Create New Subcategory",subcategory_name:"Subcategory Name",enter_subcategory_name:"Enter subcategory name",category:"Category",please_select_category:"Please select category...",create_subcategory:"Create Subcategory",subcategory_list:"Subcategory List",select_subcategories:"Select subcategories",subcategory_not_selected_error:"At least one subcategory must be selected!",could_not_create_item:"Could not create item",create_new_item:"Create New Item",general_information:"General Information",enter_item_name:"Enter item name",item_description:"Item Description",enter_item_description:"Enter item description",needs_cutlery:"Needs cutlery",is_popular:"Is popular",is_favorite:"Is Favorite",guest_view:"Guest view",raw_food:"Raw food",image:"Image",no_categories_found:"No categories found",modifiers:"Modifiers",categories:"Categories",no_modifiers_found:"No modifiers found",description:"Description",update_item_categories:"Update Item Categories",change_category_of_item_confirm:"Are you sure you want to change category of this item",remove_category_affected_warning:"Removing category for this item will cause changes on",update_item_subcategories:"Update Item Subcategories",not_found:"Not found",add_modifiers_to_item:"Add Modifiers to Item",delete_confirm:"Are you sure you want to delete this",delete_entity_used_on:"This {{entity}} is currently used on",type_validation_to_continue:'Type: "{{validation}}" to continue',items_list:"Items List",upload_attachment:"Upload Attachment",select_cities_that_apply:"Select cities that apply",select_city:"Select City",selected_hubs:"Selected Hubs",hubs_list:"Hubs list",item_86:"86",start_time_greater_than_end_time_error:"Start time must not be greater than End time","ui_sdk.smart_component.leave_page_alert":"Hey there! It looks like you\u2019re in the middle of writing something and you\n      haven\u2019t saved all of your content."}}};(0,n.Dm)(is);const as=({history:e})=>{const{setNavigation:s,can:t}=(0,i.useContext)(n.Il),r=t(l.g3.MENU.CAN_GET_MENUS),d=t(l.g3.MENU.CAN_GET_CATEGORIES),o=t(l.g3.MENU.CAN_GET_ITEMS),u=t(l.g3.MENU.CAN_GET_SUBCATEGORIES),m=t(l.g3.MENU.CAN_GET_MODIFIERS);return(0,i.useEffect)((()=>{s&&s(l.pH.MENU,[{name:"Menu",path:"/menu/list",permission:r},{name:"Category",path:"/menu/category/list",permission:d},{name:"Subcategory",path:"/menu/subcategory/list",permission:u},{name:"Item",path:"/menu/item/list",permission:o},{name:"Modifier",path:"/menu/modifier/list",permission:m}])}),[r,d,u,o,m]),(0,c.jsx)(a.F0,{history:e,children:(0,c.jsxs)(a.rs,{children:[(0,c.jsx)(a.AW,{path:"/menu/category",children:(0,c.jsxs)(a.rs,{children:[(0,c.jsx)(a.AW,{exact:!0,path:"/menu/category/list",children:(0,c.jsx)(j,{})}),(0,c.jsx)(a.AW,{exact:!0,path:"/menu/category/editor",children:(0,c.jsx)(v,{})}),(0,c.jsx)(a.AW,{exact:!0,path:"/menu/category/view/:id",children:(0,c.jsx)(_,{})}),(0,c.jsx)(a.AW,{exact:!0,path:"/menu/category/manage/:id",children:(0,c.jsx)(N,{})})]})}),(0,c.jsx)(a.AW,{path:"/menu/subcategory",children:(0,c.jsxs)(a.rs,{children:[(0,c.jsx)(a.AW,{exact:!0,path:"/menu/subcategory/list",children:(0,c.jsx)(E,{})}),(0,c.jsx)(a.AW,{exact:!0,path:"/menu/subcategory/editor",children:(0,c.jsx)(w,{})}),(0,c.jsx)(a.AW,{exact:!0,path:"/menu/subcategory/view/:id",children:(0,c.jsx)(S,{})}),(0,c.jsx)(a.AW,{exact:!0,path:"/menu/subcategory/manage/:id",children:(0,c.jsx)(U,{})})]})}),(0,c.jsx)(a.AW,{path:"/menu/item",children:(0,c.jsxs)(a.rs,{children:[(0,c.jsx)(a.AW,{exact:!0,path:"/menu/item/list",children:(0,c.jsx)(O,{})}),(0,c.jsx)(a.AW,{exact:!0,path:"/menu/item/create",children:(0,c.jsx)(le,{})}),(0,c.jsx)(a.AW,{exact:!0,path:"/menu/item/editor/:type/:id",children:(0,c.jsx)(be,{})}),(0,c.jsx)(a.AW,{exact:!0,path:"/menu/item/manage/:id",children:(0,c.jsx)(Ee,{})})]})}),(0,c.jsx)(a.AW,{path:"/menu/modifier",children:(0,c.jsxs)(a.rs,{children:[(0,c.jsx)(a.AW,{exact:!0,path:"/menu/modifier/list",children:(0,c.jsx)(Se,{})}),(0,c.jsx)(a.AW,{exact:!0,path:"/menu/modifier/editor",children:(0,c.jsx)(Xe,{})}),(0,c.jsx)(a.AW,{exact:!0,path:"/menu/modifier/view/:id",children:(0,c.jsx)(ke,{})}),(0,c.jsx)(a.AW,{exact:!0,path:"/menu/modifier/manage/:id",children:(0,c.jsx)(ze,{})})]})}),(0,c.jsx)(a.AW,{path:"/menu",children:(0,c.jsxs)(a.rs,{children:[(0,c.jsx)(a.AW,{exact:!0,path:"/menu/list",children:(0,c.jsx)(Ve,{})}),(0,c.jsx)(a.AW,{exact:!0,path:"/menu/batch-edit",children:(0,c.jsx)(Ge,{})}),(0,c.jsx)(a.AW,{exact:!0,path:"/menu/editor",children:(0,c.jsx)($e,{})}),(0,c.jsx)(a.AW,{exact:!0,path:"/menu/manage/:id",children:(0,c.jsx)(Je,{})}),(0,c.jsx)(a.AW,{exact:!0,path:"/menu/view/:id",children:(0,c.jsx)(qe,{})}),(0,c.jsx)(a.AW,{exact:!0,path:"/menu/hotels/:name/:id",children:(0,c.jsx)(Ae,{})}),(0,c.jsx)(a.l_,{to:"/menu/list"})]})})]})})}},InDy:e=>{e.exports=[[e.id,".ui-input-file{display:flex;color:var(--text-primary, #343434);font-size:.875rem}.ui-input-file.ui-input-error{color:var(--theme-danger, #D3514E)}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImlucHV0LWZpbGUuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxlQUFlLFlBQVksQ0FBQyxrQ0FBa0MsQ0FBQyxpQkFBaUIsQ0FBQyw4QkFBOEIsa0NBQWtDIiwiZmlsZSI6ImlucHV0LWZpbGUuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi51aS1pbnB1dC1maWxle2Rpc3BsYXk6ZmxleDtjb2xvcjp2YXIoLS10ZXh0LXByaW1hcnksICMzNDM0MzQpO2ZvbnQtc2l6ZTouODc1cmVtfS51aS1pbnB1dC1maWxlLnVpLWlucHV0LWVycm9ye2NvbG9yOnZhcigtLXRoZW1lLWRhbmdlciwgI0QzNTE0RSl9Il19 */","",""]]},vOI0:e=>{e.exports=[[e.id,".ui-select-trigger{position:relative;height:40px;font-size:14px;background:#fff;border:1px solid var(--border-color, #D9D9D9);box-sizing:border-box;border-radius:5px;cursor:pointer;display:flex;justify-content:space-between;align-items:center;padding:0 10px}.ui-select-trigger.ui-select-open{border-radius:5px 5px 0 0}.ui-select-trigger .ui-icon{color:#a9a9a9}.ui-select-trigger.ui-select-error{border-color:var(--theme-danger, #D3514E);color:var(--theme-danger, #D3514E)}.ui-select-trigger.ui-select-error .ui-icon{color:var(--theme-danger, #D3514E)}.ui-select-suffix{display:flex;align-items:center;right:0}.ui-select-suffix>*+*{margin-left:10px}.ui-select{z-index:var(--z-dropdown, )}.ui-select .ui-card{box-shadow:none !important;padding:0;border-radius:0 0 5px 5px !important;border:1px solid var(--border-color, #D9D9D9);border-top:none;overflow:hidden;filter:none !important;padding:5px}.ui-select .ui-list .ui-list-item{font-size:14px;padding:0 5px}.ui-select .ui-list .ui-list-item[hidden]{display:none}.selectselect{display:none;pointer-events:none;position:absolute;opacity:0}.ui-select-multi-wrapper{margin-top:-5px;margin-left:-10px}.ui-select-multi-wrapper .ui-chip{margin-left:5px;margin-top:5px;font-size:.75rem}.ui-select-trigger-multiple{height:auto;padding:4px 10px;min-height:40px}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsbUJBQW1CLGlCQUFpQixDQUFDLFdBQVcsQ0FBQyxjQUFjLENBQUMsZUFBZSxDQUFDLDZDQUE2QyxDQUFDLHFCQUFxQixDQUFDLGlCQUFpQixDQUFDLGNBQWMsQ0FBQyxZQUFZLENBQUMsNkJBQTZCLENBQUMsa0JBQWtCLENBQUMsY0FBYyxDQUFDLGtDQUFrQyx5QkFBeUIsQ0FBQyw0QkFBNEIsYUFBYSxDQUFDLG1DQUFtQyx5Q0FBeUMsQ0FBQyxrQ0FBa0MsQ0FBQyw0Q0FBNEMsa0NBQWtDLENBQUMsa0JBQWtCLFlBQVksQ0FBQyxrQkFBa0IsQ0FBQyxPQUFPLENBQUMsc0JBQXNCLGdCQUFnQixDQUFDLFdBQVcsMkJBQTJCLENBQUMsb0JBQW9CLDBCQUEwQixDQUFDLFNBQVMsQ0FBQyxvQ0FBb0MsQ0FBQyw2Q0FBNkMsQ0FBQyxlQUFlLENBQUMsZUFBZSxDQUFDLHNCQUFzQixDQUFDLFdBQVcsQ0FBQyxrQ0FBa0MsY0FBYyxDQUFDLGFBQWEsQ0FBQywwQ0FBMEMsWUFBWSxDQUFDLGNBQWMsWUFBWSxDQUFDLG1CQUFtQixDQUFDLGlCQUFpQixDQUFDLFNBQVMsQ0FBQyx5QkFBeUIsZUFBZSxDQUFDLGlCQUFpQixDQUFDLGtDQUFrQyxlQUFlLENBQUMsY0FBYyxDQUFDLGdCQUFnQixDQUFDLDRCQUE0QixXQUFXLENBQUMsZ0JBQWdCLENBQUMsZUFBZSIsImZpbGUiOiJpbmRleC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLnVpLXNlbGVjdC10cmlnZ2Vye3Bvc2l0aW9uOnJlbGF0aXZlO2hlaWdodDo0MHB4O2ZvbnQtc2l6ZToxNHB4O2JhY2tncm91bmQ6I2ZmZjtib3JkZXI6MXB4IHNvbGlkIHZhcigtLWJvcmRlci1jb2xvciwgI0Q5RDlEOSk7Ym94LXNpemluZzpib3JkZXItYm94O2JvcmRlci1yYWRpdXM6NXB4O2N1cnNvcjpwb2ludGVyO2Rpc3BsYXk6ZmxleDtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjthbGlnbi1pdGVtczpjZW50ZXI7cGFkZGluZzowIDEwcHh9LnVpLXNlbGVjdC10cmlnZ2VyLnVpLXNlbGVjdC1vcGVue2JvcmRlci1yYWRpdXM6NXB4IDVweCAwIDB9LnVpLXNlbGVjdC10cmlnZ2VyIC51aS1pY29ue2NvbG9yOiNhOWE5YTl9LnVpLXNlbGVjdC10cmlnZ2VyLnVpLXNlbGVjdC1lcnJvcntib3JkZXItY29sb3I6dmFyKC0tdGhlbWUtZGFuZ2VyLCAjRDM1MTRFKTtjb2xvcjp2YXIoLS10aGVtZS1kYW5nZXIsICNEMzUxNEUpfS51aS1zZWxlY3QtdHJpZ2dlci51aS1zZWxlY3QtZXJyb3IgLnVpLWljb257Y29sb3I6dmFyKC0tdGhlbWUtZGFuZ2VyLCAjRDM1MTRFKX0udWktc2VsZWN0LXN1ZmZpeHtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO3JpZ2h0OjB9LnVpLXNlbGVjdC1zdWZmaXg+Kisqe21hcmdpbi1sZWZ0OjEwcHh9LnVpLXNlbGVjdHt6LWluZGV4OnZhcigtLXotZHJvcGRvd24sICl9LnVpLXNlbGVjdCAudWktY2FyZHtib3gtc2hhZG93Om5vbmUgIWltcG9ydGFudDtwYWRkaW5nOjA7Ym9yZGVyLXJhZGl1czowIDAgNXB4IDVweCAhaW1wb3J0YW50O2JvcmRlcjoxcHggc29saWQgdmFyKC0tYm9yZGVyLWNvbG9yLCAjRDlEOUQ5KTtib3JkZXItdG9wOm5vbmU7b3ZlcmZsb3c6aGlkZGVuO2ZpbHRlcjpub25lICFpbXBvcnRhbnQ7cGFkZGluZzo1cHh9LnVpLXNlbGVjdCAudWktbGlzdCAudWktbGlzdC1pdGVte2ZvbnQtc2l6ZToxNHB4O3BhZGRpbmc6MCA1cHh9LnVpLXNlbGVjdCAudWktbGlzdCAudWktbGlzdC1pdGVtW2hpZGRlbl17ZGlzcGxheTpub25lfS5zZWxlY3RzZWxlY3R7ZGlzcGxheTpub25lO3BvaW50ZXItZXZlbnRzOm5vbmU7cG9zaXRpb246YWJzb2x1dGU7b3BhY2l0eTowfS51aS1zZWxlY3QtbXVsdGktd3JhcHBlcnttYXJnaW4tdG9wOi01cHg7bWFyZ2luLWxlZnQ6LTEwcHh9LnVpLXNlbGVjdC1tdWx0aS13cmFwcGVyIC51aS1jaGlwe21hcmdpbi1sZWZ0OjVweDttYXJnaW4tdG9wOjVweDtmb250LXNpemU6Ljc1cmVtfS51aS1zZWxlY3QtdHJpZ2dlci1tdWx0aXBsZXtoZWlnaHQ6YXV0bztwYWRkaW5nOjRweCAxMHB4O21pbi1oZWlnaHQ6NDBweH0iXX0= */","",""]]},JNdn:e=>{e.exports=[[e.id,".menu-container{display:flex;flex-direction:column;height:100%;width:100%}.menu-container .menu-content+.menu-content{margin-top:10px}.menu-content{width:100%;flex:1}.menu-content>.butler-row{margin-top:0}.menu-content form>.ui-form-control+.ui-form-control{margin-top:10px}.toolbar{display:flex;flex-direction:row;align-items:center;justify-content:space-between;padding:20px 30px}.butler-row+.butler-row{margin-top:0}.form-bottom-action{display:flex;flex-direction:row;align-items:center;justify-content:flex-end}.form-bottom-action>.ui-btn+.ui-btn{margin-left:10px}.menu-sidebar-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:15px}.menu-view-header{height:40px;display:flex;align-items:center;justify-content:space-between;padding-left:30px;padding-right:20px;margin-bottom:10px}.menu-container>.butler-row>.butler-col>.ui-card+.ui-card{margin-top:10px}.menu-text-capitalize{text-transform:capitalize}.menu-no-permissions{flex:1}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInN0eWxlcy5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLGdCQUFnQixZQUFZLENBQUMscUJBQXFCLENBQUMsV0FBVyxDQUFDLFVBQVUsQ0FBQyw0Q0FBNEMsZUFBZSxDQUFDLGNBQWMsVUFBVSxDQUFDLE1BQU0sQ0FBQywwQkFBMEIsWUFBWSxDQUFDLHFEQUFxRCxlQUFlLENBQUMsU0FBUyxZQUFZLENBQUMsa0JBQWtCLENBQUMsa0JBQWtCLENBQUMsNkJBQTZCLENBQUMsaUJBQWlCLENBQUMsd0JBQXdCLFlBQVksQ0FBQyxvQkFBb0IsWUFBWSxDQUFDLGtCQUFrQixDQUFDLGtCQUFrQixDQUFDLHdCQUF3QixDQUFDLG9DQUFvQyxnQkFBZ0IsQ0FBQyxxQkFBcUIsWUFBWSxDQUFDLGtCQUFrQixDQUFDLDZCQUE2QixDQUFDLGtCQUFrQixDQUFDLGtCQUFrQixXQUFXLENBQUMsWUFBWSxDQUFDLGtCQUFrQixDQUFDLDZCQUE2QixDQUFDLGlCQUFpQixDQUFDLGtCQUFrQixDQUFDLGtCQUFrQixDQUFDLDBEQUEwRCxlQUFlLENBQUMsc0JBQXNCLHlCQUF5QixDQUFDLHFCQUFxQixNQUFNIiwiZmlsZSI6InN0eWxlcy5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLm1lbnUtY29udGFpbmVye2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47aGVpZ2h0OjEwMCU7d2lkdGg6MTAwJX0ubWVudS1jb250YWluZXIgLm1lbnUtY29udGVudCsubWVudS1jb250ZW50e21hcmdpbi10b3A6MTBweH0ubWVudS1jb250ZW50e3dpZHRoOjEwMCU7ZmxleDoxfS5tZW51LWNvbnRlbnQ+LmJ1dGxlci1yb3d7bWFyZ2luLXRvcDowfS5tZW51LWNvbnRlbnQgZm9ybT4udWktZm9ybS1jb250cm9sKy51aS1mb3JtLWNvbnRyb2x7bWFyZ2luLXRvcDoxMHB4fS50b29sYmFye2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpyb3c7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuO3BhZGRpbmc6MjBweCAzMHB4fS5idXRsZXItcm93Ky5idXRsZXItcm93e21hcmdpbi10b3A6MH0uZm9ybS1ib3R0b20tYWN0aW9ue2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpyb3c7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpmbGV4LWVuZH0uZm9ybS1ib3R0b20tYWN0aW9uPi51aS1idG4rLnVpLWJ0bnttYXJnaW4tbGVmdDoxMHB4fS5tZW51LXNpZGViYXItaGVhZGVye2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47bWFyZ2luLWJvdHRvbToxNXB4fS5tZW51LXZpZXctaGVhZGVye2hlaWdodDo0MHB4O2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47cGFkZGluZy1sZWZ0OjMwcHg7cGFkZGluZy1yaWdodDoyMHB4O21hcmdpbi1ib3R0b206MTBweH0ubWVudS1jb250YWluZXI+LmJ1dGxlci1yb3c+LmJ1dGxlci1jb2w+LnVpLWNhcmQrLnVpLWNhcmR7bWFyZ2luLXRvcDoxMHB4fS5tZW51LXRleHQtY2FwaXRhbGl6ZXt0ZXh0LXRyYW5zZm9ybTpjYXBpdGFsaXplfS5tZW51LW5vLXBlcm1pc3Npb25ze2ZsZXg6MX0iXX0= */","",""]]},"p+Yr":e=>{e.exports=[[e.id,".menu-ordered-list{max-width:200px;width:100%}.menu-ordered-list .menu-sub-order-item+.menu-sub-order-item{margin-top:10px}.menu-category-collapsible+.menu-category-collapsible{margin-top:10px}.menu-sub-order-item{border:1px solid var(--border-color, #D9D9D9);height:40px}.menu-sub-order-item.active{background-color:var(--theme-primary, #004438);color:var(--text-secondary, #FFF)}.menu-sub-order-item.drag-active{display:none !important}.menu-drop-indicator{height:0px;visibility:hidden}.menu-drop-indicator.active{border:1px dashed var(--border-color, #D9D9D9);height:50px;visibility:visible;margin-top:10px}.menu-drop-indicator+.menu-sub-order-item{margin-top:10px}.menu-item-suggested-list .ui-chip+.ui-chip{margin-top:5px}.menu-item-suggested-list .menu-suggested-chips{max-height:200px;overflow:auto}.menu-item-suggested-list .menu-suggested-chips .menu-select-chip-wrapper:first-child .ui-divider{display:none}.menu-item-suggested-list .menu-selected-chips{max-height:140px;overflow:auto;margin-left:-5px}.menu-item-suggested-list .menu-selected-chips .ui-chip{margin-left:5px}.menu-price-multiplier{max-width:500px}.menu-price-multiplier .price-options{width:200px}.menu-price-multiplier .price-options .ui-select-trigger{min-width:110px}.menu-price-multiplier .checkboxes{max-height:250px;overflow-y:auto}.menu-toolbar{margin-bottom:20px}.menu-toolbar .menu-toolbar-actions>*+*{margin-left:5px}.menu-inactive-badge{background-color:var(--theme-dangerLighter, #faebea);color:var(--theme-danger, #D3514E)}.item-86-opacity{opacity:.6}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInN0eWxlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsbUJBQW1CLGVBQWUsQ0FBQyxVQUFVLENBQUMsNkRBQTZELGVBQWUsQ0FBQyxzREFBc0QsZUFBZSxDQUFDLHFCQUFxQiw2Q0FBNkMsQ0FBQyxXQUFXLENBQUMsNEJBQTRCLDhDQUE4QyxDQUFDLGlDQUFpQyxDQUFDLGlDQUFpQyx1QkFBdUIsQ0FBQyxxQkFBcUIsVUFBVSxDQUFDLGlCQUFpQixDQUFDLDRCQUE0Qiw4Q0FBOEMsQ0FBQyxXQUFXLENBQUMsa0JBQWtCLENBQUMsZUFBZSxDQUFDLDBDQUEwQyxlQUFlLENBQUMsNENBQTRDLGNBQWMsQ0FBQyxnREFBZ0QsZ0JBQWdCLENBQUMsYUFBYSxDQUFDLGtHQUFrRyxZQUFZLENBQUMsK0NBQStDLGdCQUFnQixDQUFDLGFBQWEsQ0FBQyxnQkFBZ0IsQ0FBQyx3REFBd0QsZUFBZSxDQUFDLHVCQUF1QixlQUFlLENBQUMsc0NBQXNDLFdBQVcsQ0FBQyx5REFBeUQsZUFBZSxDQUFDLG1DQUFtQyxnQkFBZ0IsQ0FBQyxlQUFlLENBQUMsY0FBYyxrQkFBa0IsQ0FBQyx3Q0FBd0MsZUFBZSxDQUFDLHFCQUFxQixvREFBb0QsQ0FBQyxrQ0FBa0MsQ0FBQyxpQkFBaUIsVUFBVSIsImZpbGUiOiJzdHlsZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLm1lbnUtb3JkZXJlZC1saXN0e21heC13aWR0aDoyMDBweDt3aWR0aDoxMDAlfS5tZW51LW9yZGVyZWQtbGlzdCAubWVudS1zdWItb3JkZXItaXRlbSsubWVudS1zdWItb3JkZXItaXRlbXttYXJnaW4tdG9wOjEwcHh9Lm1lbnUtY2F0ZWdvcnktY29sbGFwc2libGUrLm1lbnUtY2F0ZWdvcnktY29sbGFwc2libGV7bWFyZ2luLXRvcDoxMHB4fS5tZW51LXN1Yi1vcmRlci1pdGVte2JvcmRlcjoxcHggc29saWQgdmFyKC0tYm9yZGVyLWNvbG9yLCAjRDlEOUQ5KTtoZWlnaHQ6NDBweH0ubWVudS1zdWItb3JkZXItaXRlbS5hY3RpdmV7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS10aGVtZS1wcmltYXJ5LCAjMDA0NDM4KTtjb2xvcjp2YXIoLS10ZXh0LXNlY29uZGFyeSwgI0ZGRil9Lm1lbnUtc3ViLW9yZGVyLWl0ZW0uZHJhZy1hY3RpdmV7ZGlzcGxheTpub25lICFpbXBvcnRhbnR9Lm1lbnUtZHJvcC1pbmRpY2F0b3J7aGVpZ2h0OjBweDt2aXNpYmlsaXR5OmhpZGRlbn0ubWVudS1kcm9wLWluZGljYXRvci5hY3RpdmV7Ym9yZGVyOjFweCBkYXNoZWQgdmFyKC0tYm9yZGVyLWNvbG9yLCAjRDlEOUQ5KTtoZWlnaHQ6NTBweDt2aXNpYmlsaXR5OnZpc2libGU7bWFyZ2luLXRvcDoxMHB4fS5tZW51LWRyb3AtaW5kaWNhdG9yKy5tZW51LXN1Yi1vcmRlci1pdGVte21hcmdpbi10b3A6MTBweH0ubWVudS1pdGVtLXN1Z2dlc3RlZC1saXN0IC51aS1jaGlwKy51aS1jaGlwe21hcmdpbi10b3A6NXB4fS5tZW51LWl0ZW0tc3VnZ2VzdGVkLWxpc3QgLm1lbnUtc3VnZ2VzdGVkLWNoaXBze21heC1oZWlnaHQ6MjAwcHg7b3ZlcmZsb3c6YXV0b30ubWVudS1pdGVtLXN1Z2dlc3RlZC1saXN0IC5tZW51LXN1Z2dlc3RlZC1jaGlwcyAubWVudS1zZWxlY3QtY2hpcC13cmFwcGVyOmZpcnN0LWNoaWxkIC51aS1kaXZpZGVye2Rpc3BsYXk6bm9uZX0ubWVudS1pdGVtLXN1Z2dlc3RlZC1saXN0IC5tZW51LXNlbGVjdGVkLWNoaXBze21heC1oZWlnaHQ6MTQwcHg7b3ZlcmZsb3c6YXV0bzttYXJnaW4tbGVmdDotNXB4fS5tZW51LWl0ZW0tc3VnZ2VzdGVkLWxpc3QgLm1lbnUtc2VsZWN0ZWQtY2hpcHMgLnVpLWNoaXB7bWFyZ2luLWxlZnQ6NXB4fS5tZW51LXByaWNlLW11bHRpcGxpZXJ7bWF4LXdpZHRoOjUwMHB4fS5tZW51LXByaWNlLW11bHRpcGxpZXIgLnByaWNlLW9wdGlvbnN7d2lkdGg6MjAwcHh9Lm1lbnUtcHJpY2UtbXVsdGlwbGllciAucHJpY2Utb3B0aW9ucyAudWktc2VsZWN0LXRyaWdnZXJ7bWluLXdpZHRoOjExMHB4fS5tZW51LXByaWNlLW11bHRpcGxpZXIgLmNoZWNrYm94ZXN7bWF4LWhlaWdodDoyNTBweDtvdmVyZmxvdy15OmF1dG99Lm1lbnUtdG9vbGJhcnttYXJnaW4tYm90dG9tOjIwcHh9Lm1lbnUtdG9vbGJhciAubWVudS10b29sYmFyLWFjdGlvbnM+Kisqe21hcmdpbi1sZWZ0OjVweH0ubWVudS1pbmFjdGl2ZS1iYWRnZXtiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLXRoZW1lLWRhbmdlckxpZ2h0ZXIsICNmYWViZWEpO2NvbG9yOnZhcigtLXRoZW1lLWRhbmdlciwgI0QzNTE0RSl9Lml0ZW0tODYtb3BhY2l0eXtvcGFjaXR5Oi42fSJdfQ== */","",""]]}}]);